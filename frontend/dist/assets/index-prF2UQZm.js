import{ad as lt,ae as e,r as i,af as te,ag as dt,ah as ct,ai as pt,aj as De,ak as Y,al as xt,am as ut,an as gt,ao as ft,ap as Ue,aq as He,ar as ht,as as mt,at as yt,au as bt,av as jt,aw as vt,ax as wt,ay as St,az as Ct,aA as fe,aB as he,aC as Be,aD as kt,aE as It,aF as we,aG as Te,aH as Tt,aI as zt,aJ as ee,aK as Rt,R as Wt,aL as Dt}from"./vendor-DfIPIlLA.js";import{R as se,B as ze,C as be,X as je,Y as ve,T as re,a as Re,P as qe,b as $e,c as Ve,L as Bt,d as At}from"./recharts-CFeGQCGJ.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const x of s)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&n(w)}).observe(document,{childList:!0,subtree:!0});function a(s){const x={};return s.integrity&&(x.integrity=s.integrity),s.referrerPolicy&&(x.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?x.credentials="include":s.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function n(s){if(s.ep)return;s.ep=!0;const x=a(s);fetch(s.href,x)}})();const Pt="/api",S=lt.create({baseURL:Pt,headers:{"Content-Type":"application/json"}});S.interceptors.request.use(t=>{const o=localStorage.getItem("token");return o&&(t.headers.Authorization=`Bearer ${o}`),t});S.interceptors.response.use(t=>t,t=>{var a;const o=(a=t.response)==null?void 0:a.status;if(o===401||o===403){localStorage.removeItem("token"),localStorage.removeItem("user");const n=window.location.pathname;n.startsWith("/admin")?n!=="/admin/login"&&(window.location.href="/admin/login"):n.startsWith("/staff")&&n!=="/staff/login"&&(window.location.href="/staff/login")}return Promise.reject(t)});function ce(){const t=localStorage.getItem("user");if(t==null||t===""||t==="undefined")return null;try{return JSON.parse(t)}catch{return null}}const Ae="queueEntry",Pe="queueDate",Ge=t=>{const o=new Date().toISOString().split("T")[0];localStorage.setItem(Ae,JSON.stringify(t)),localStorage.setItem(Pe,o)},Se=()=>{const t=localStorage.getItem(Ae),o=localStorage.getItem(Pe),a=new Date().toISOString().split("T")[0];if(!t||o!==a)return o!==a&&me(),null;try{return JSON.parse(t)}catch{return me(),null}},me=()=>{localStorage.removeItem(Ae),localStorage.removeItem(Pe)};function _({label:t,error:o,...a}){return e.jsxs("div",{style:{marginBottom:"16px"},children:[t&&e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:t}),e.jsx("input",{style:{width:"100%",padding:"12px",borderRadius:"8px",border:o?"2px solid #ef4444":"2px solid #e2e8f0",fontSize:"16px",transition:"border-color 0.2s"},...a}),o&&e.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:"#ef4444"},children:o})]})}function F({children:t,onClick:o,variant:a="primary",disabled:n=!1,fullWidth:s=!1,icon:x,iconPosition:w="left",type:h,style:c,...g}){const u={padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:n?"not-allowed":"pointer",transition:"all 0.2s",opacity:n?.6:1,width:s?"100%":"auto",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:a==="primary"||a==="success"||a==="danger"||a==="gradient"?"0 2px 4px rgba(0,0,0,0.1)":"none",...c},l={primary:{background:n?"#cbd5e1":"#2563eb",color:"white"},gradient:{background:n?"#cbd5e1":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:n?"none":"0 4px 12px rgba(102, 126, 234, 0.4)"},secondary:{background:n?"#cbd5e1":"#64748b",color:"white"},success:{background:n?"#cbd5e1":"#10b981",color:"white"},danger:{background:n?"#cbd5e1":"#ef4444",color:"white"},outline:{background:"transparent",color:n?"#cbd5e1":"#2563eb",border:`2px solid ${n?"#cbd5e1":"#2563eb"}`}},v=l[a]||l.primary,k=x&&e.jsx(x,{size:18,strokeWidth:2.5}),T=w==="left"?e.jsxs(e.Fragment,{children:[" ",k," ",t," "]}):e.jsxs(e.Fragment,{children:[" ",t," ",k," "]});return e.jsx("button",{type:h||"button",style:{...u,...v},onClick:n?void 0:o,disabled:n,onMouseOver:f=>{n||(a==="primary"?(f.target.style.background="#1e40af",f.target.style.boxShadow="0 4px 8px rgba(37, 99, 235, 0.3)"):a==="outline"?f.target.style.background="#eff6ff":a==="danger"?(f.target.style.background="#dc2626",f.target.style.boxShadow="0 4px 8px rgba(239, 68, 68, 0.3)"):a==="success"?(f.target.style.background="#059669",f.target.style.boxShadow="0 4px 8px rgba(16, 185, 129, 0.3)"):a==="gradient"&&(f.target.style.background="linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%)",f.target.style.boxShadow="0 6px 16px rgba(102, 126, 234, 0.5)"))},onMouseOut:f=>{n||(f.target.style.background=v.background,f.target.style.boxShadow=a==="gradient"?"0 4px 12px rgba(102, 126, 234, 0.4)":a==="primary"||a==="success"||a==="danger"?"0 2px 4px rgba(0,0,0,0.1)":"none")},...g,children:T})}function ne(){return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})}function ae({size:t="medium",showText:o=!0}){const[a,n]=i.useState(null),[s,x]=i.useState(!0),[w,h]=i.useState(!1);i.useEffect(()=>{c();const l=setInterval(c,3e4);return()=>clearInterval(l)},[]);const c=async()=>{try{const l=await S.get("/admin/settings/logo");if(l.data.logoUrl){let v=l.data.logoUrl;v&&!v.startsWith("http")&&!v.startsWith("/")&&(v="/"+v);const k=v.includes("?")?"&":"?";v=v+k+"_t="+Date.now(),n(v),h(!1)}else n(null),h(!1)}catch(l){console.error("Failed to load logo:",l),h(!0)}finally{x(!1)}},g={small:{width:"80px",height:"40px"},medium:{width:"120px",height:"60px"},large:{width:"180px",height:"90px"}},u=g[t]||g.medium;return s?null:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[a&&!w?e.jsx("img",{src:a,alt:"Logo",style:{...u,objectFit:"contain",maxWidth:"100%"},onError:l=>{console.error("Failed to load logo image:",a),h(!0),n(null)}}):e.jsx("div",{style:{...u,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"8px",color:"white",fontWeight:"700",fontSize:t==="small"?"14px":t==="large"?"24px":"18px"},children:"Q"}),o&&e.jsx("span",{style:{fontSize:t==="small"?"18px":t==="large"?"28px":"24px",fontWeight:"700",color:"#1e293b"}})]})}const Nt=[{value:"REGULAR",label:"Regular"},{value:"SENIOR_CITIZEN",label:"Senior Citizen"},{value:"PWD",label:"PWD"},{value:"PREGNANT",label:"Pregnant"}];function Et(){const t=te(),[o,a]=i.useState(!0),[n,s]=i.useState(!1),[x,w]=i.useState([]),[h,c]=i.useState({clientName:"",clientType:"REGULAR",categoryIds:[],subCategoryIds:[]}),[g,u]=i.useState({});i.useEffect(()=>{l()},[]);const l=async()=>{var j;try{const d=await S.get("/categories");w(Array.isArray((j=d.data)==null?void 0:j.categories)?d.data.categories:[])}catch(d){console.error("Failed to load categories:",d)}finally{a(!1)}},v=i.useMemo(()=>{var C;if(!((C=h.categoryIds)!=null&&C.length))return[];const j=(x||[]).filter(A=>h.categoryIds.includes(A.id)),d=new Map;return j.forEach(A=>{(A.subCategories||[]).forEach(z=>{d.has(z.id)||d.set(z.id,{...z,categoryName:A.name})})}),Array.from(d.values())},[h.categoryIds,x]),k=j=>{const d=h.categoryIds||[],C=d.includes(j)?d.filter(M=>M!==j):[...d,j],A=(x||[]).filter(M=>C.includes(M.id)),z=new Set;A.forEach(M=>{(M.subCategories||[]).forEach($=>z.add($.id))}),c({...h,categoryIds:C,subCategoryIds:(h.subCategoryIds||[]).filter(M=>z.has(M))})},T=j=>{const d=h.subCategoryIds||[],C=d.includes(j)?d.filter(A=>A!==j):[...d,j];c({...h,subCategoryIds:C})},f=async j=>{var C,A,z,M;j.preventDefault(),u({});const d={};if(h.clientName.trim()||(d.clientName="Name is required"),(C=h.categoryIds)!=null&&C.length||(d.categoryId="Select at least one category"),Object.keys(d).length>0){u(d);return}s(!0);try{const W=(await S.post("/queue/join",{clientName:h.clientName.trim(),clientType:h.clientType,categoryIds:h.categoryIds,subCategoryIds:(A=h.subCategoryIds)!=null&&A.length?h.subCategoryIds:void 0})).data.queueEntry,P=(W.concernCategories||[W.category]).map(H=>H.name).join(", "),V=(W.concernSubCategories||[]).map(H=>H.name).join(", ")||null;Ge({queueNumber:W.queueNumber,clientName:W.clientName,date:W.date,category:P,subCategory:V,clientType:W.clientType,status:W.status}),t("/success")}catch($){console.error("Failed to join queue:",$),u({submit:((M=(z=$.response)==null?void 0:z.data)==null?void 0:M.error)||"Failed to join queue"})}finally{s(!1)}};return o?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})}):e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:"Join Queue"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Fill in your details to get a queue number"}),e.jsxs("form",{onSubmit:f,children:[e.jsx(_,{label:"Your Name",value:h.clientName,onChange:j=>c({...h,clientName:j.target.value}),error:g.clientName,placeholder:"Enter your full name",required:!0}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"10px",color:"#1e293b"},children:"Client Type"}),e.jsx("div",{className:"client-type-pills",children:Nt.map(({value:j,label:d})=>e.jsxs("label",{className:`pill-radio ${h.clientType===j?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"clientType",value:j,checked:h.clientType===j,onChange:()=>c({...h,clientType:j})}),e.jsx("span",{children:d})]},j))})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"10px",color:"#1e293b"},children:["Concern Category ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),g.categoryId&&e.jsx("div",{style:{fontSize:"12px",color:"#ef4444",marginBottom:"8px"},children:g.categoryId}),e.jsx("div",{className:"checkbox-group",children:(x||[]).map(j=>e.jsxs("label",{className:`checkbox-row ${(h.categoryIds||[]).includes(j.id)?"selected":""}`,children:[e.jsx("input",{type:"checkbox",checked:(h.categoryIds||[]).includes(j.id),onChange:()=>k(j.id)}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{children:j.name})]},j.id))})]}),v.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"10px",color:"#1e293b"},children:"Sub-Concern (Optional)"}),e.jsx("div",{className:"checkbox-group",children:v.map(j=>e.jsxs("label",{className:`checkbox-row ${(h.subCategoryIds||[]).includes(j.id)?"selected":""}`,children:[e.jsx("input",{type:"checkbox",checked:(h.subCategoryIds||[]).includes(j.id),onChange:()=>T(j.id)}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{children:j.name})]},j.id))})]}),g.submit&&e.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:g.submit}),e.jsx(F,{type:"submit",variant:"gradient",fullWidth:!0,disabled:n,style:{marginTop:"8px",padding:"14px 24px",fontSize:"16px"},children:n?"Joining...":"Join Queue"})]}),e.jsx("div",{style:{marginTop:"24px",textAlign:"center"},children:e.jsx("a",{href:"/monitor",style:{color:"#2563eb",textDecoration:"none",fontSize:"14px"},children:"View Queue Status â†’"})})]})})}function Ce(t){if(!t)return"";const o=t.split("-");return o.length>1?o[1]:t}function Ft(t){return t?t.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):""}function Ye({window:t}){const{label:o,staff:a,currentServing:n}=t,s=c=>{const g=c.trim().split(" ");return g.length>=2?(g[0][0]+g[g.length-1][0]).toUpperCase():c.substring(0,2).toUpperCase()},x=(a==null?void 0:a.name)||"â€”",w=n?Ce(n.queueNumber):null,h=n&&[n.clientName||"",n.clientType?`(${Ft(n.clientType)})`:""].filter(Boolean).join(" ").trim()||null;return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"2px solid #e2e8f0",transition:"all 0.2s",display:"flex",alignItems:"stretch",gap:"20px",minHeight:"180px"},children:[e.jsx("div",{style:{flex:"0 0 38%",maxWidth:"200px",borderRadius:"12px",overflow:"hidden",background:a!=null&&a.profilePicture?void 0:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:a!=null&&a.profilePicture?e.jsx("img",{src:a.profilePicture,alt:x,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):e.jsx("span",{style:{color:"white",fontWeight:"700",fontSize:"32px"},children:s(x)})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minWidth:0},children:[e.jsx("div",{style:{fontSize:"26px",fontWeight:"700",color:"#1e293b",marginBottom:"4px"},children:x}),n?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"22px",fontWeight:"700",color:"#1e293b",marginBottom:"8px"},children:"is now serving:"}),e.jsx("div",{style:{fontSize:"clamp(48px, 8vw, 84px)",fontWeight:"700",color:"#1e293b",lineHeight:1.1,marginBottom:"8px"},children:w}),h&&e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#475569",marginBottom:"8px"},children:h})]}):e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#94a3b8",fontStyle:"italic"},children:"No active service"}),e.jsx("div",{style:{marginTop:"auto",paddingTop:"12px",fontSize:"32px",fontWeight:"700",color:"#1e293b"},children:o})]})]})}function _e({clientType:t}){const o={REGULAR:{bg:"#e2e8f0",color:"#475569"},SENIOR_CITIZEN:{bg:"#fef3c7",color:"#92400e"},PWD:{bg:"#dbeafe",color:"#1e40af"},PREGNANT:{bg:"#fce7f3",color:"#9f1239"}},a={REGULAR:"Regular",SENIOR_CITIZEN:"Senior",PWD:"PWD",PREGNANT:"Pregnant"},n=o[t]||o.REGULAR;return e.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:n.bg,color:n.color},children:a[t]})}function Ot(){const t=te(),[o,a]=i.useState(null),[n,s]=i.useState([]),[x,w]=i.useState(!0),[h,c]=i.useState(0);i.useEffect(()=>{const v=Se();if(!v){t("/");return}a(v),g();const k=setInterval(g,2e3);return()=>clearInterval(k)},[t]),i.useEffect(()=>{(o==null?void 0:o.status)==="SERVED"&&t("/thank-you")},[o==null?void 0:o.status,t]);const g=async()=>{var v;try{const k=Se()||o;if(k!=null&&k.queueNumber){const j=(await S.get(`/queue/${k.queueNumber}`)).data.queueEntry,d={...k,status:j.status};if(a(d),Ge(d),j.status==="SERVED"){t("/thank-you");return}if(j.status==="WAITING")try{const C=await S.get(`/queue/${k.queueNumber}/ahead`);c(C.data.peopleAhead||0)}catch{const A=await S.get("/queue/public/stats");c(A.data.waiting||0)}else c(0)}const T=await S.get("/queue/public/windows");s(T.data.windows)}catch(k){console.error("Failed to load data:",k),((v=k.response)==null?void 0:v.status)===404&&(me(),t("/"))}finally{w(!1)}};if(x||!o)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})});const u={WAITING:{bg:"#fef3c7",color:"#92400e",text:"Waiting"},NOW_SERVING:{bg:"#dbeafe",color:"#1e40af",text:"Being served"},SERVED:{bg:"#d1fae5",color:"#065f46",text:"Served"},SKIPPED:{bg:"#fee2e2",color:"#991b1b",text:"Skipped"}},l=u[o.status]||u.WAITING;return e.jsx("div",{style:{minHeight:"100vh",background:"#f8fafc",padding:"20px"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:["Hello, ",o.clientName]}),e.jsx("div",{style:{fontSize:"48px",fontWeight:"700",color:"#2563eb",marginBottom:"16px",letterSpacing:"2px"},children:Ce(o.queueNumber)}),e.jsx("div",{style:{display:"inline-block",padding:"8px 16px",borderRadius:"20px",backgroundColor:l.bg,color:l.color,fontSize:"14px",fontWeight:"600",marginBottom:"16px"},children:l.text}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(_e,{clientType:o.clientType}),e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:"#e2e8f0",color:"#475569"},children:[o.category,o.subCategory&&` - ${o.subCategory}`]})]}),o.status==="WAITING"&&h>0&&e.jsxs("div",{style:{marginTop:"16px",fontSize:"14px",color:"#64748b"},children:["Approximately ",h," ",h===1?"person":"people"," ahead"]}),e.jsx("div",{style:{marginTop:"24px",padding:"16px",background:"#f1f5f9",borderRadius:"8px",fontSize:"14px",color:"#475569"},children:"ðŸ’¡ You can leave and monitor your queue status from this page. We'll update automatically."})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px",color:"#1e293b"},children:"Active Windows"}),e.jsx("div",{className:"grid-responsive",style:{display:"grid",gap:"16px"},children:n.length>0?n.map(v=>e.jsx(Ye,{window:v},v.id)):e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",background:"white",borderRadius:"12px",color:"#64748b"},children:"No active windows at the moment"})})]})]})})}function Lt(){const t=te();i.useEffect(()=>{const a=Se();if(!a||a.status!=="SERVED"){t("/");return}const n=setTimeout(()=>{me()},5e3);return()=>clearTimeout(n)},[t]);const o=Se();return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"48px",maxWidth:"600px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("div",{style:{fontSize:"64px",marginBottom:"24px"},children:"âœ…"}),e.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"16px",color:"#1e293b"},children:"Thank You!"}),o&&e.jsxs("p",{style:{fontSize:"18px",color:"#64748b",marginBottom:"24px"},children:["Thank you, ",e.jsx("strong",{children:o.clientName}),", for your visit."]}),e.jsx("p",{style:{fontSize:"16px",color:"#475569",marginBottom:"32px",lineHeight:"1.6"},children:"We appreciate your business and look forward to serving you again."}),e.jsx("div",{style:{padding:"20px",background:"#f1f5f9",borderRadius:"12px",marginBottom:"32px"},children:e.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Your service has been completed. Have a wonderful day!"})}),e.jsx("button",{onClick:()=>{me(),t("/")},style:{padding:"12px 32px",borderRadius:"8px",border:"none",background:"#2563eb",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:a=>{a.target.style.background="#1e40af"},onMouseOut:a=>{a.target.style.background="#2563eb"},children:"Return to Home"})]})})}function Mt(){const[t,o]=i.useState([]),[a,n]=i.useState([]),[s,x]=i.useState(null),[w,h]=i.useState(!0),[c,g]=i.useState(!1),u=i.useRef(null),l=i.useRef([]),v=i.useRef(!1),k=i.useRef([]),T=i.useRef(!1),[f,j]=i.useState(null),[d,C]=i.useState("");i.useEffect(()=>{A(),z(),M();const r=setInterval(A,2e3);return()=>clearInterval(r)},[]),i.useEffect(()=>{X()},[]),i.useEffect(()=>{a.length>0&&!s&&x(a[0])},[a,s]),i.useEffect(()=>{if(u.current&&s){const r=u.current,y=()=>{const I=(a.findIndex(B=>B.url===s.url)+1)%a.length;x(a[I])};r.addEventListener("ended",y),r.volume=1,r.load();const p=r.play();return p!==void 0&&p.then(()=>{r.muted=!1}).catch(()=>{r.muted=!0,r.play().catch(console.error)}),()=>{r.removeEventListener("ended",y)}}},[s,a]);const A=async()=>{try{const y=(await S.get("/queue/public/windows")).data.windows||[];try{J(l.current,y)}catch(p){console.error("Failed to run TTS announcements:",p)}o(y),l.current=y}catch(r){console.error("Failed to load windows:",r)}finally{h(!1)}},z=async()=>{try{const r=await S.get("/admin/settings/ding-sound");j(r.data.dingSoundUrl||null)}catch(r){console.error("Failed to load ding sound URL:",r),j(null)}},M=async()=>{try{const r=await S.get("/admin/settings/tts-announcement");r.data.template&&C(r.data.template)}catch(r){console.error("Failed to load TTS announcement template:",r)}},$=r=>{if(typeof window>"u"){r&&setTimeout(r,7e3);return}let p=!1;const m=()=>{p||(p=!0,r&&r())};try{if(f){const B=new Audio(f);B.volume=1,B.addEventListener("ended",m),B.addEventListener("error",U=>{console.error("Failed to play custom ding sound:",U),m()}),B.play().catch(U=>{console.error("Failed to start custom ding sound:",U),m()}),setTimeout(m,7e3);return}const I=window.AudioContext||window.webkitAudioContext;if(I){const B=new I,U=B.createOscillator(),D=B.createOscillator(),q=B.createGain();U.type="sine",D.type="sine";const N=B.currentTime;U.frequency.setValueAtTime(880,N),D.frequency.setValueAtTime(1175,N+.08),U.connect(q),D.connect(q),q.connect(B.destination),q.gain.setValueAtTime(1e-4,N),q.gain.exponentialRampToValueAtTime(.25,N+.03),q.gain.exponentialRampToValueAtTime(1e-4,N+.4),U.start(N),D.start(N+.08),U.stop(N+.4),D.stop(N+.4),setTimeout(m,500);return}}catch(I){console.error("Failed to play ding sound:",I)}setTimeout(m,7e3)},W=r=>{const y=u.current;y&&(y.volume=Math.max(0,Math.min(1,r)))},P=r=>new Promise(y=>{S.post("/tts",{text:r},{responseType:"arraybuffer"}).then(p=>{const m=p.data;if(!m){y();return}const I=new Blob([m],{type:"audio/mpeg"}),B=URL.createObjectURL(I),U=new Audio(B);U.addEventListener("ended",()=>{URL.revokeObjectURL(B),y()}),U.addEventListener("error",()=>{URL.revokeObjectURL(B),y()}),U.play().catch(()=>y())}).catch(()=>{if(typeof window<"u"&&window.speechSynthesis){const p=new SpeechSynthesisUtterance(r);p.lang="en-US",p.rate=1,p.pitch=1,p.onend=y,p.onerror=y,window.speechSynthesis.cancel(),window.speechSynthesis.speak(p)}else y()})}),V=()=>new Promise(r=>$(r)),H=async()=>{if(T.current||k.current.length===0)return;T.current=!0;const{text:r}=k.current.shift();W(.5),await V(),await P(r),W(1),T.current=!1,k.current.length>0&&H()},J=(r,y)=>{if(typeof window>"u")return;if(!v.current){v.current=!0;return}const p=new Map;(r||[]).forEach(I=>{I&&I.id&&I.currentServing&&p.set(I.id,I.currentServing.queueNumber)});const m=[];(y||[]).forEach(I=>{if(!I||!I.id||!I.currentServing)return;const B=I.currentServing.queueNumber,U=I.currentServing.clientName,D=p.get(I.id);if(!B||B===D)return;const q=Ce?Ce(B):B;let N=q;const K=parseInt(q,10);Number.isNaN(K)||(N=String(K));const pe=I.label||"Window",xe=U?`, or client name ${U}`:"",ke=(d||"Window {{window}} will now serve queue number {{queueNumber}}{{clientNamePart}}.").replace(/{{\s*(window|window number)\s*}}/gi,pe).replace(/{{\s*(queueNumber|queue number)\s*}}/gi,N).replace(/{{\s*clientNamePart\s*}}/gi,xe).replace(/{{\s*(clientName|client name)\s*}}/gi,U||"");m.push({text:ke})}),m.forEach(I=>k.current.push(I)),H()},X=async()=>{try{const r=await S.get("/videos");n(r.data.videos||[]),g(!1)}catch(r){console.error("Failed to load videos:",r),g(!0),n([])}};return e.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",background:"#f8fafc",overflow:"hidden"},children:[e.jsx("div",{style:{flex:"0 0 50vh",minHeight:0,overflowY:"auto"},children:e.jsxs("div",{style:{padding:"20px",maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"8px 0"},children:[e.jsx(ae,{size:"large"}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#1e293b",margin:0},children:"Queue Monitoring"})]}),w?e.jsx(ne,{}):e.jsx("div",{style:{display:"grid",gap:"16px",marginBottom:"24px"},className:"grid-responsive",children:t.length>0?t.map(r=>e.jsx(Ye,{window:r},r.id)):e.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",background:"white",borderRadius:"12px",color:"#64748b"},children:"No active windows at the moment"})})]})}),e.jsx("div",{style:{flex:"0 0 50vh",minHeight:0,background:"#1e293b",display:"flex",flexDirection:"column"},children:a.length>0&&!c?e.jsx("div",{style:{flex:1,minHeight:0,position:"relative",background:"#000"},children:e.jsx("video",{ref:u,src:s==null?void 0:s.url,controls:!0,autoPlay:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"contain"}})}):e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 40px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"18px",fontWeight:"500",marginBottom:"8px"},children:"No video playlist set yet"}),e.jsx("div",{style:{color:"#64748b",fontSize:"14px"},children:"Please configure the video folder path in the admin settings"})]})})]})}function Ut(){const t=te(),[o,a]=i.useState({username:"",password:""}),[n,s]=i.useState(""),[x,w]=i.useState(!1);i.useEffect(()=>{const c=localStorage.getItem("token"),g=ce();c&&(g==null?void 0:g.role)==="STAFF"&&t("/staff/dashboard")},[t]);const h=async c=>{var g,u;c.preventDefault(),s(""),w(!0);try{const l=await S.post("/auth/staff/login",o);localStorage.setItem("token",l.data.token),localStorage.setItem("user",JSON.stringify(l.data.user)),t("/staff/dashboard")}catch(l){s(((u=(g=l.response)==null?void 0:g.data)==null?void 0:u.error)||"Login failed")}finally{w(!1)}};return e.jsxs("div",{className:"staff-login-root",style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",paddingLeft:"max(20px, env(safe-area-inset-left))",paddingRight:"max(20px, env(safe-area-inset-right))"},children:[e.jsx("style",{children:`
        @media (max-width: 480px) {
          .staff-login-root { padding: 16px !important; }
          .staff-login-card { padding: 24px !important; }
          .staff-login-title { font-size: 22px !important; }
        }
      `}),e.jsxs("div",{className:"staff-login-card",style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("h1",{className:"staff-login-title",style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:"Staff Login"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Sign in to manage your queue"}),e.jsxs("form",{onSubmit:h,children:[e.jsx(_,{label:"Username",value:o.username,onChange:c=>a({...o,username:c.target.value}),placeholder:"Enter your username",required:!0,autoFocus:!0}),e.jsx(_,{label:"Password",type:"password",value:o.password,onChange:c=>a({...o,password:c.target.value}),placeholder:"Enter your password",required:!0}),n&&e.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:n}),e.jsx(F,{type:"submit",fullWidth:!0,disabled:x,children:x?"Logging in...":"Login"})]})]})]})}function We({label:t,error:o,children:a,...n}){return e.jsxs("div",{style:{marginBottom:"16px"},children:[t&&e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:t}),e.jsx("select",{style:{width:"100%",padding:"12px",borderRadius:"8px",border:o?"2px solid #ef4444":"2px solid #e2e8f0",fontSize:"16px",backgroundColor:"white",cursor:"pointer"},...n,children:a}),o&&e.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:"#ef4444"},children:o})]})}function Ht({onProfileClick:t,onLogout:o}){const[a,n]=i.useState(!1),[s,x]=i.useState(null),[w,h]=i.useState(!0),c=i.useRef(null);i.useEffect(()=>{g()},[]),i.useEffect(()=>{const l=v=>{c.current&&!c.current.contains(v.target)&&n(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const g=async()=>{try{const l=await S.get("/staff/profile");x(l.data.staff)}catch(l){console.error("Failed to load profile:",l)}finally{h(!1)}},u=l=>{if(!l)return"?";const v=l.trim().split(" ");return v.length>=2?(v[0][0]+v[v.length-1][0]).toUpperCase():l.substring(0,2).toUpperCase()};return w?e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0"}}):e.jsxs("div",{style:{position:"relative"},ref:c,children:[e.jsx("button",{onClick:()=>n(!a),style:{width:"44px",height:"44px",minWidth:"44px",minHeight:"44px",borderRadius:"50%",border:"2px solid #e2e8f0",background:s!=null&&s.profilePicture?`url(${s.profilePicture}) center/cover`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"700",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.2s"},onMouseOver:l=>{l.target.style.borderColor="#2563eb",l.target.style.transform="scale(1.05)"},onMouseOut:l=>{l.target.style.borderColor="#e2e8f0",l.target.style.transform="scale(1)"},children:!(s!=null&&s.profilePicture)&&u(s==null?void 0:s.name)}),a&&e.jsxs("div",{style:{position:"absolute",top:"48px",right:0,background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"160px",zIndex:1e3,border:"1px solid #e2e8f0",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:(s==null?void 0:s.name)||"Staff"}),e.jsx("button",{onClick:()=>{n(!1),t()},style:{width:"100%",padding:"14px 16px",minHeight:"44px",border:"none",background:"transparent",textAlign:"left",fontSize:"14px",color:"#1e293b",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center"},onMouseOver:l=>{l.target.style.background="#f1f5f9"},onMouseOut:l=>{l.target.style.background="transparent"},children:"Profile"}),e.jsx("button",{onClick:()=>{n(!1),o()},style:{width:"100%",padding:"14px 16px",minHeight:"44px",border:"none",background:"transparent",textAlign:"left",fontSize:"14px",color:"#ef4444",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center"},onMouseOver:l=>{l.target.style.background="#fee2e2"},onMouseOut:l=>{l.target.style.background="transparent"},children:"Logout"})]})]})}const Fe={success:{icon:De,color:"#10b981",bg:"#d1fae5"},error:{icon:pt,color:"#ef4444",bg:"#fee2e2"},warning:{icon:ct,color:"#f59e0b",bg:"#fef3c7"},info:{icon:dt,color:"#2563eb",bg:"#dbeafe"}};let qt=0;const le=[],ge=[];function Qe(t,o="info",a=3e3){const n=qt++,s={id:n,message:t,type:o,duration:a};return le.push(s),ge.forEach(x=>x([...le])),a>0&&setTimeout(()=>{Je(n)},a),n}function Je(t){const o=le.findIndex(a=>a.id===t);o>-1&&(le.splice(o,1),ge.forEach(a=>a([...le])))}function G(t,o){return Qe(t,"success",o)}function L(t,o){return Qe(t,"error",o)}function $t(){const[t,o]=i.useState([]);return i.useEffect(()=>{const a=n=>{o(n)};return ge.push(a),o([...le]),()=>{const n=ge.indexOf(a);n>-1&&ge.splice(n,1)}},[]),e.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e4,display:"flex",flexDirection:"column",gap:"12px",pointerEvents:"none"},children:[(t||[]).map(a=>{const n=Fe[a.type]||Fe.info,s=n.icon;return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px 20px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",gap:"12px",minWidth:"300px",maxWidth:"400px",pointerEvents:"auto",animation:"slideIn 0.3s ease-out",borderLeft:`4px solid ${n.color}`},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:n.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(s,{size:16,color:n.color})}),e.jsx("div",{style:{flex:1,fontSize:"14px",color:"#1e293b",lineHeight:"1.5"},children:a.message}),e.jsx("button",{onClick:()=>Je(a.id),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b",transition:"color 0.2s"},onMouseOver:x=>{x.target.style.color="#1e293b"},onMouseOut:x=>{x.target.style.color="#64748b"},children:e.jsx(Y,{size:18})})]},a.id)}),e.jsx("style",{children:`
        @keyframes slideIn {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
      `})]})}function de({open:t,title:o,message:a,onConfirm:n,onCancel:s,confirmText:x="Confirm",cancelText:w="Cancel",variant:h="danger"}){if(!t)return null;const c={danger:{confirmBg:"#ef4444",confirmHover:"#dc2626"},warning:{confirmBg:"#f59e0b",confirmHover:"#d97706"},info:{confirmBg:"#2563eb",confirmHover:"#1e40af"}},g=c[h]||c.danger;return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease-out"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",animation:"slideUp 0.3s ease-out"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:0},children:o}),e.jsx("button",{onClick:s,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px",lineHeight:"1.6"},children:a}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:s,style:{padding:"10px 20px",border:"2px solid #e2e8f0",borderRadius:"8px",background:"transparent",color:"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:u=>{u.target.style.background="#f1f5f9",u.target.style.borderColor="#cbd5e1"},onMouseOut:u=>{u.target.style.background="transparent",u.target.style.borderColor="#e2e8f0"},children:w}),e.jsx("button",{onClick:n,style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:g.confirmBg,color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onMouseOver:u=>{u.target.style.background=g.confirmHover,u.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)"},onMouseOut:u=>{u.target.style.background=g.confirmBg,u.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:x})]})]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})}const Oe=["#2563eb","#10b981","#f59e0b","#ef4444"];function Vt(){const t=te(),[o,a]=i.useState(!0),[n,s]=i.useState(null),[x,w]=i.useState([]),[h,c]=i.useState({}),[g,u]=i.useState([]),[l,v]=i.useState(null),[k,T]=i.useState("today"),[f,j]=i.useState(new Date);i.useEffect(()=>{const p=localStorage.getItem("token"),m=ce();if(!p||(m==null?void 0:m.role)!=="STAFF"){t("/staff/login");return}d(),C();const I=setInterval(d,3e3);return()=>clearInterval(I)},[t]),i.useEffect(()=>{k&&A()},[k]),i.useEffect(()=>{const p=setInterval(()=>j(new Date),1e3);return()=>clearInterval(p)},[]);const d=async()=>{var p;try{const m=await S.get("/staff/dashboard");s(m.data.window),w(m.data.queue||[]),c(m.data.stats||{})}catch(m){console.error("Failed to load dashboard:",m),((p=m.response)==null?void 0:p.status)===401&&t("/staff/login")}finally{a(!1)}},C=async()=>{try{const p=await S.get("/windows/active");u(p.data.windows||[])}catch(p){console.error("Failed to load windows:",p)}},A=async()=>{try{let p,m;const I=new Date;if(k==="today")p=I.toISOString().split("T")[0],m=p;else if(k==="yesterday"){const U=new Date(I);U.setDate(U.getDate()-1),p=U.toISOString().split("T")[0],m=p}else p=I.toISOString().split("T")[0],m=p;const B=await S.get(`/staff/analytics?startDate=${p}&endDate=${m}`);v(B.data)}catch(p){console.error("Failed to load analytics:",p)}},z=async p=>{var m,I;try{await S.post("/staff/assign-window",{windowId:p}),d(),C()}catch(B){console.error("Failed to assign window:",B),alert(((I=(m=B.response)==null?void 0:m.data)==null?void 0:I.error)||"Failed to assign window")}},M=async p=>{var m,I,B,U,D;try{await S.post(`/staff/serve/${p}`),d()}catch(q){console.error("Failed to start serving:",q),((m=q.response)==null?void 0:m.status)===409?(L(((B=(I=q.response)==null?void 0:I.data)==null?void 0:B.error)||"Client was already claimed. Refreshing..."),d()):L(((D=(U=q.response)==null?void 0:U.data)==null?void 0:D.error)||"Failed to start serving")}},$=async p=>{var m,I;try{await S.post(`/staff/complete/${p}`),d(),A()}catch(B){console.error("Failed to complete:",B),alert(((I=(m=B.response)==null?void 0:m.data)==null?void 0:I.error)||"Failed to complete")}},W=async p=>{var m,I;if(n.confirm("Mark this client as skipped?"))try{await S.post(`/staff/skip/${p}`),d()}catch(B){console.error("Failed to skip:",B),alert(((I=(m=B.response)==null?void 0:m.data)==null?void 0:I.error)||"Failed to skip")}},P=async()=>{try{await S.get("/staff/dashboard").then(m=>m.data.window)&&await S.post("/staff/assign-window",{windowId:null})}catch(p){console.error("Error deactivating window on logout:",p)}localStorage.removeItem("token"),localStorage.removeItem("user"),t("/staff/login")},V=()=>{t("/staff/profile")};if(o)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})});const H=x.filter(p=>["SENIOR_CITIZEN","PWD","PREGNANT"].includes(p.clientType)),J=x.filter(p=>p.clientType==="REGULAR"),X=l!=null&&l.byCategory?Object.entries(l.byCategory).map(([p,m])=>({name:p,value:m})):[],r=l!=null&&l.byClientType?Object.entries(l.byClientType).map(([p,m])=>({name:p,value:m})):[],y=p=>{const m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I=["January","February","March","April","May","June","July","August","September","October","November","December"],B=m[p.getDay()],U=I[p.getMonth()],D=p.getDate(),q=p.getFullYear();let N=p.getHours();const K=String(p.getMinutes()).padStart(2,"0"),pe=String(p.getSeconds()).padStart(2,"0"),xe=N>=12?"PM":"AM";return N=N%12,N=N||12,`${B}, ${U} ${D}, ${q} at ${N}:${K}:${pe} ${xe}`};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .staff-dashboard-root {
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        .staff-dashboard-content {
          padding-left: max(24px, env(safe-area-inset-left));
          padding-right: max(24px, env(safe-area-inset-right));
        }
        .queue-item-buttons button {
          min-height: 44px;
        }
        @media (max-width: 768px) {
          .staff-dashboard-header {
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .staff-dashboard-header > div:first-child {
            width: 100%;
            flex-direction: column;
            align-items: flex-start !important;
            gap: 8px !important;
          }
          .staff-dashboard-header-center {
            width: 100%;
            text-align: left;
          }
          .staff-dashboard-main-grid {
            grid-template-columns: 1fr !important;
          }
          .staff-dashboard-content {
            padding: 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .queue-item-grid {
            grid-template-columns: 1fr !important;
            gap: 12px !important;
          }
          .queue-item-buttons {
            flex-direction: row !important;
            width: 100% !important;
            flex-wrap: wrap;
          }
          .queue-item-buttons button {
            flex: 1;
            min-width: 120px;
          }
          .staff-window-assign-grid {
            grid-template-columns: 1fr !important;
          }
        }
        @media (max-width: 480px) {
          .queue-item-buttons {
            flex-direction: column !important;
          }
          .queue-item-buttons button {
            min-width: 100%;
          }
        }
        @media (max-width: 1024px) and (min-width: 769px) {
          .staff-dashboard-main-grid {
            grid-template-columns: 60% 40% !important;
          }
        }
      `}),e.jsxs("div",{className:"staff-dashboard-root",style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsxs("div",{className:"staff-dashboard-header",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flex:1},children:[e.jsx(ae,{size:"small"}),n&&e.jsxs("div",{className:"staff-dashboard-header-center",style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:["Operating: ",n.label]})]}),e.jsx(Ht,{onProfileClick:V,onLogout:P})]}),e.jsxs("div",{className:"staff-dashboard-content",style:{maxWidth:"1400px",margin:"0 auto",padding:"24px"},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:y(f)})}),!n&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Assign Window"}),e.jsx("div",{className:"staff-window-assign-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:g.map(p=>e.jsx(F,{onClick:()=>z(p.id),variant:"outline",children:p.label},p.id))})]}),e.jsxs("div",{className:"staff-dashboard-main-grid",style:{display:"grid",gridTemplateColumns:"75% 25%",gap:"24px"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:["Queue (",x.length,")"]}),H.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#f59e0b",marginBottom:"12px"},children:"Priority Clients"}),H.map(p=>e.jsx(Le,{entry:p,onServe:M,onComplete:$,onSkip:W},p.id))]}),J.length>0&&e.jsxs("div",{children:[H.length>0&&e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#64748b",marginBottom:"12px"},children:"Regular Clients"}),J.map(p=>e.jsx(Le,{entry:p,onServe:M,onComplete:$,onSkip:W},p.id))]}),x.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"No clients in queue"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"In Queue"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#f59e0b"},children:x.length})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:"Total Served Today"}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#2563eb"},children:h.totalServed||0})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Analytics"}),e.jsxs(We,{value:k,onChange:p=>T(p.target.value),style:{width:"100%"},children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"yesterday",children:"Yesterday"})]})]}),l&&e.jsxs(e.Fragment,{children:[X.length>0&&e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"By Category"}),e.jsx(se,{width:"100%",height:200,children:e.jsxs(ze,{data:X,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(je,{dataKey:"name"}),e.jsx(ve,{}),e.jsx(re,{}),e.jsx(Re,{dataKey:"value",fill:"#2563eb"})]})})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"By Client Type"}),e.jsx(se,{width:"100%",height:200,children:e.jsxs(qe,{children:[e.jsx($e,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:p,percent:m})=>`${p}: ${(m*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((p,m)=>e.jsx(Ve,{fill:Oe[m%Oe.length]},`cell-${m}`))}),e.jsx(re,{})]})})]})]})]})]})]})]})]})]})}function Le({entry:t,onServe:o,onComplete:a,onSkip:n}){var x,w,h;const s=t.status==="NOW_SERVING";return e.jsxs("div",{className:"queue-item-grid",style:{padding:"16px",border:s?"2px solid #2563eb":"1px solid #e2e8f0",borderRadius:"8px",marginBottom:"12px",background:s?"#eff6ff":"white",display:"grid",gridTemplateColumns:"1fr auto",gap:"20px",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#2563eb",marginBottom:"4px"},children:t.queueNumber}),e.jsx("div",{style:{fontSize:"14px",color:"#1e293b",marginBottom:"4px"},children:t.clientName}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"8px",flexWrap:"wrap"},children:[e.jsx(_e,{clientType:t.clientType}),e.jsxs("span",{style:{fontSize:"12px",color:"#64748b"},children:[((x=t.concernCategories)!=null&&x.length?t.concernCategories:t.category?[t.category]:[]).map(c=>c==null?void 0:c.name).filter(Boolean).join(", "),((w=t.concernSubCategories)!=null&&w.length?t.concernSubCategories:t.subCategory?[t.subCategory]:[]).map(c=>c==null?void 0:c.name).filter(Boolean).length>0&&` - ${((h=t.concernSubCategories)!=null&&h.length?t.concernSubCategories:[t.subCategory]).map(c=>c==null?void 0:c.name).filter(Boolean).join(", ")}`]})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8"},children:["Joined: ",new Date(t.joinedAt).toLocaleTimeString()]})]}),e.jsxs("div",{className:"queue-item-buttons",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[s?e.jsx(F,{variant:"success",icon:De,onClick:()=>a(t.id),style:{fontSize:"12px",padding:"8px 16px",whiteSpace:"nowrap"},children:"Mark as Served"}):e.jsx(F,{variant:"primary",icon:xt,onClick:()=>o(t.id),style:{fontSize:"12px",padding:"8px 16px",whiteSpace:"nowrap"},children:"Start Serving"}),e.jsx(F,{variant:"danger",icon:ut,onClick:()=>n(t.id),style:{fontSize:"12px",padding:"8px 16px",whiteSpace:"nowrap"},children:"Skip"})]})]})}function Gt(){const t=te(),[o,a]=i.useState(!0),[n,s]=i.useState(!1),[x,w]=i.useState(null),[h,c]=i.useState(null),[g,u]=i.useState(null),[l,v]=i.useState(!1),[k,T]=i.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,j]=i.useState(!1);i.useEffect(()=>{const W=localStorage.getItem("token"),P=ce();if(!W||(P==null?void 0:P.role)!=="STAFF"){t("/staff/login");return}d()},[t]);const d=async()=>{var W;try{const P=await S.get("/staff/profile");w(P.data.staff),c(P.data.staff.profilePicture)}catch(P){console.error("Failed to load profile:",P),((W=P.response)==null?void 0:W.status)===401&&t("/staff/login")}finally{a(!1)}},C=W=>{const P=W.target.files[0];if(P){const V=new FileReader;V.onloadend=()=>{u(V.result)},V.readAsDataURL(P),c(P)}},A=async W=>{var P,V;W.preventDefault(),s(!0);try{if(await S.put("/staff/profile",{name:x.name}),h instanceof File){const H=new FormData;H.append("picture",h);const J=await S.post("/staff/profile/picture",H,{headers:{"Content-Type":"multipart/form-data"}});c(J.data.profilePicture),u(null)}G("Profile updated successfully!"),t("/staff/dashboard")}catch(H){console.error("Failed to update profile:",H),L(((V=(P=H.response)==null?void 0:P.data)==null?void 0:V.error)||"Failed to update profile")}finally{s(!1)}},z=async W=>{var P,V;if(W.preventDefault(),k.newPassword!==k.confirmPassword){L("New passwords do not match");return}if(k.newPassword.length<6){L("Password must be at least 6 characters");return}j(!0);try{await S.post("/staff/profile/change-password",{currentPassword:k.currentPassword,newPassword:k.newPassword}),G("Password changed successfully!"),v(!1),T({currentPassword:"",newPassword:"",confirmPassword:""})}catch(H){console.error("Failed to change password:",H),L(((V=(P=H.response)==null?void 0:P.data)==null?void 0:V.error)||"Failed to change password")}finally{j(!1)}};if(o)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})});const M=W=>{if(!W)return"?";const P=W.trim().split(" ");return P.length>=2?(P[0][0]+P[P.length-1][0]).toUpperCase():W.substring(0,2).toUpperCase()},$=g||(x!=null&&x.profilePicture?x.profilePicture:null);return e.jsxs("div",{className:"staff-profile-root",style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsx("style",{children:`
        .staff-profile-root {
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        @media (max-width: 768px) {
          .staff-profile-header {
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .staff-profile-content {
            margin: 24px auto !important;
            padding: 0 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .staff-profile-card {
            padding: 24px !important;
          }
          .staff-profile-buttons {
            flex-direction: column !important;
          }
          .staff-profile-buttons button {
            width: 100%;
          }
        }
      `}),e.jsxs("div",{className:"staff-profile-header",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ae,{size:"small"}),e.jsx(F,{variant:"outline",onClick:()=>t("/staff/dashboard"),children:"Back to Dashboard"})]}),e.jsx("div",{className:"staff-profile-content",style:{maxWidth:"600px",margin:"40px auto",padding:"0 24px"},children:e.jsxs("div",{className:"staff-profile-card",style:{background:"white",borderRadius:"12px",padding:"32px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"32px",color:"#1e293b"},children:"My Profile"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[e.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",margin:"0 auto 16px",border:"3px solid #e2e8f0",background:$?`url(${$}) center/cover`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"700",fontSize:"36px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:!$&&M(x==null?void 0:x.name)}),e.jsxs("label",{style:{display:"inline-block",padding:"8px 16px",background:"#2563eb",color:"white",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:W=>{W.target.style.background="#1e40af"},onMouseOut:W=>{W.target.style.background="#2563eb"},children:["Change Picture",e.jsx("input",{type:"file",accept:"image/*",onChange:C,style:{display:"none"}})]}),e.jsx("p",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px"},children:"JPG, PNG, GIF, WebP (max 2MB)"})]}),e.jsx(_,{label:"Name",value:(x==null?void 0:x.name)||"",onChange:W=>w({...x,name:W.target.value}),required:!0}),e.jsx(_,{label:"Username",value:(x==null?void 0:x.username)||"",disabled:!0,style:{background:"#f1f5f9"}}),e.jsxs("div",{className:"staff-profile-buttons",style:{display:"flex",gap:"12px",marginTop:"24px"},children:[e.jsx(F,{type:"submit",disabled:n,fullWidth:!0,children:n?"Saving...":"Save Changes"}),e.jsx(F,{variant:"outline",onClick:()=>t("/staff/dashboard"),fullWidth:!0,children:"Cancel"})]})]}),e.jsxs("div",{style:{marginTop:"32px",paddingTop:"32px",borderTop:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:"Change Password"}),e.jsx(F,{variant:"outline",onClick:()=>{v(!l),l&&T({currentPassword:"",newPassword:"",confirmPassword:""})},children:l?"Cancel":"Change Password"})]}),l&&e.jsxs("form",{onSubmit:z,children:[e.jsx(_,{label:"Current Password",type:"password",value:k.currentPassword,onChange:W=>T({...k,currentPassword:W.target.value}),required:!0}),e.jsx(_,{label:"New Password",type:"password",value:k.newPassword,onChange:W=>T({...k,newPassword:W.target.value}),required:!0}),e.jsx(_,{label:"Confirm New Password",type:"password",value:k.confirmPassword,onChange:W=>T({...k,confirmPassword:W.target.value}),required:!0}),e.jsx(F,{type:"submit",disabled:f,fullWidth:!0,style:{marginTop:"16px"},children:f?"Changing...":"Change Password"})]})]})]})})]})}function Yt(){const t=te(),[o,a]=i.useState({username:"",password:""}),[n,s]=i.useState(""),[x,w]=i.useState(!1);i.useEffect(()=>{const c=localStorage.getItem("token"),g=ce();c&&(g==null?void 0:g.role)==="ADMIN"&&t("/admin/dashboard")},[t]);const h=async c=>{var g,u;c.preventDefault(),s(""),w(!0);try{const l=await S.post("/auth/admin/login",o);localStorage.setItem("token",l.data.token),localStorage.setItem("user",JSON.stringify(l.data.user)),t("/admin/dashboard")}catch(l){s(((u=(g=l.response)==null?void 0:g.data)==null?void 0:u.error)||"Login failed")}finally{w(!1)}};return e.jsxs("div",{className:"admin-login-root",style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",paddingLeft:"max(20px, env(safe-area-inset-left))",paddingRight:"max(20px, env(safe-area-inset-right))"},children:[e.jsx("style",{children:`
        @media (max-width: 480px) {
          .admin-login-root { padding: 16px !important; }
          .admin-login-card { padding: 24px !important; }
          .admin-login-title { font-size: 22px !important; }
        }
      `}),e.jsxs("div",{className:"admin-login-card",style:{background:"white",borderRadius:"16px",padding:"40px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"center"},children:e.jsx(ae,{size:"medium"})}),e.jsx("h1",{className:"admin-login-title",style:{fontSize:"28px",fontWeight:"700",marginBottom:"8px",color:"#1e293b",textAlign:"center"},children:"Admin Login"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Sign in to manage the system"}),e.jsxs("form",{onSubmit:h,children:[e.jsx(_,{label:"Username",value:o.username,onChange:c=>a({...o,username:c.target.value}),placeholder:"Enter your username",required:!0,autoFocus:!0}),e.jsx(_,{label:"Password",type:"password",value:o.password,onChange:c=>a({...o,password:c.target.value}),placeholder:"Enter your password",required:!0}),n&&e.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#991b1b",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:n}),e.jsx(F,{type:"submit",fullWidth:!0,disabled:x,children:x?"Logging in...":"Login"})]})]})]})}function _t({onLogout:t}){const[o,a]=i.useState(!1),[n,s]=i.useState(null),[x,w]=i.useState(!0),h=i.useRef(null);te(),i.useEffect(()=>{c()},[]),i.useEffect(()=>{const u=l=>{h.current&&!h.current.contains(l.target)&&a(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const c=async()=>{try{const u=ce();u&&s({name:u.name||"Admin",username:u.username})}catch(u){console.error("Failed to load profile:",u)}finally{w(!1)}},g=u=>{if(!u)return"A";const l=u.trim().split(" ");return l.length>=2?(l[0][0]+l[l.length-1][0]).toUpperCase():u.substring(0,2).toUpperCase()};return x?e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0"}}):e.jsxs("div",{style:{position:"relative"},ref:h,children:[e.jsx("button",{onClick:()=>a(!o),style:{width:"44px",height:"44px",minWidth:"44px",minHeight:"44px",borderRadius:"50%",border:"2px solid #e2e8f0",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"700",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.2s"},onMouseOver:u=>{u.target.style.borderColor="#2563eb",u.target.style.transform="scale(1.05)"},onMouseOut:u=>{u.target.style.borderColor="#e2e8f0",u.target.style.transform="scale(1)"},children:g(n==null?void 0:n.name)}),o&&e.jsxs("div",{style:{position:"absolute",top:"48px",right:0,background:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"160px",zIndex:1e3,border:"1px solid #e2e8f0",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",fontSize:"14px",fontWeight:"600",color:"#1e293b"},children:(n==null?void 0:n.name)||"Admin"}),e.jsx("button",{onClick:()=>{a(!1),t()},style:{width:"100%",padding:"14px 16px",minHeight:"44px",border:"none",background:"transparent",textAlign:"left",fontSize:"14px",color:"#ef4444",cursor:"pointer",transition:"background 0.2s",display:"flex",alignItems:"center"},onMouseOver:u=>{u.target.style.background="#fee2e2"},onMouseOut:u=>{u.target.style.background="transparent"},children:"Logout"})]})]})}function Qt({open:t,title:o,message:a,placeholder:n="",onConfirm:s,onCancel:x,confirmText:w="Confirm",cancelText:h="Cancel",type:c="text",required:g=!0}){const[u,l]=i.useState("");if(i.useEffect(()=>{t&&l("")},[t]),!t)return null;const v=()=>{g&&!u.trim()||(s(u),l(""))},k=()=>{l(""),x()};return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"fadeIn 0.2s ease-out"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",animation:"slideUp 0.3s ease-out"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b",margin:0},children:o}),e.jsx("button",{onClick:k,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),a&&e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px",lineHeight:"1.6"},children:a}),e.jsx("input",{type:c,value:u,onChange:T=>l(T.target.value),placeholder:n,required:g,style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",marginBottom:"24px",transition:"border-color 0.2s"},onFocus:T=>{T.target.style.borderColor="#2563eb"},onBlur:T=>{T.target.style.borderColor="#e2e8f0"},onKeyDown:T=>{T.key==="Enter"?v():T.key==="Escape"&&k()},autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:k,style:{padding:"10px 20px",border:"2px solid #e2e8f0",borderRadius:"8px",background:"transparent",color:"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:T=>{T.target.style.background="#f1f5f9",T.target.style.borderColor="#cbd5e1"},onMouseOut:T=>{T.target.style.background="transparent",T.target.style.borderColor="#e2e8f0"},children:h}),e.jsx("button",{onClick:v,disabled:g&&!u.trim(),style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:g&&!u.trim()?"#cbd5e1":"#2563eb",color:"white",fontSize:"14px",fontWeight:"600",cursor:g&&!u.trim()?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onMouseOver:T=>{g&&!u.trim()||(T.target.style.background="#1e40af",T.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)")},onMouseOut:T=>{g&&!u.trim()||(T.target.style.background="#2563eb",T.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)")},children:w})]})]}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})}const Me=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6"];function ie(t,o){var n;const a=(n=t==null?void 0:t.response)==null?void 0:n.data;if(a!=null&&a.error&&typeof a.error=="string")return a.error;if(Array.isArray(a==null?void 0:a.errors)&&a.errors.length>0){const s=a.errors[0];return(s==null?void 0:s.msg)||(s==null?void 0:s.message)||o}return o}function Jt(){const t=te(),[o,a]=i.useState("dashboard"),[n,s]=i.useState(!0),[x,w]=i.useState(null),[h,c]=i.useState([]),[g,u]=i.useState([]),[l,v]=i.useState([]),[k,T]=i.useState(null),[f,j]=i.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],staffIds:[],categoryIds:[],clientTypes:[],startHour:"",endHour:""}),[d,C]=i.useState(!1),[A,z]=i.useState({open:!1,data:{}}),[M,$]=i.useState({open:!1,data:{}}),[W,P]=i.useState({open:!1,data:{}}),[V,H]=i.useState({open:!1,data:{}}),[J,X]=i.useState({open:!1,title:"",message:"",placeholder:"",type:"text",onConfirm:()=>{},onCancel:()=>{}});i.useEffect(()=>{const D=localStorage.getItem("token"),q=ce();if(!D||(q==null?void 0:q.role)!=="ADMIN"){t("/admin/login");return}r();const N=setInterval(()=>{o==="dashboard"&&y()},3e3);return()=>clearInterval(N)},[t,o]),i.useEffect(()=>{o==="reports"&&B()},[o,f]);const r=async()=>{try{await Promise.all([y(),p(),m(),I()])}catch(D){console.error("Error loading data:",D)}finally{s(!1)}},y=async()=>{try{const D=await S.get("/admin/dashboard");w(D.data.stats)}catch(D){console.error("Failed to load dashboard:",D)}},p=async()=>{try{const D=await S.get("/admin/staff");c(D.data.staff)}catch(D){console.error("Failed to load staff:",D)}},m=async()=>{try{const D=await S.get("/admin/windows");u(D.data.windows)}catch(D){console.error("Failed to load windows:",D)}},I=async()=>{try{const D=await S.get("/categories");v(D.data.categories)}catch(D){console.error("Failed to load categories:",D)}},B=async()=>{try{const D=new URLSearchParams;D.append("startDate",f.startDate),D.append("endDate",f.endDate),f.staffIds&&f.staffIds.length>0&&f.staffIds.forEach(N=>D.append("staffId",N)),f.categoryIds&&f.categoryIds.length>0&&f.categoryIds.forEach(N=>D.append("categoryId",N)),f.clientTypes&&f.clientTypes.length>0&&f.clientTypes.forEach(N=>D.append("clientType",N)),f.startHour&&D.append("startHour",f.startHour),f.endHour&&D.append("endHour",f.endHour);const q=await S.get(`/admin/reports?${D.toString()}`);T(q.data)}catch(D){console.error("Failed to load reports:",D)}},U=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/admin/login")};return n?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{})}):e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .admin-dashboard-root {
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        .admin-dashboard-content {
          padding-left: max(24px, env(safe-area-inset-left));
          padding-right: max(24px, env(safe-area-inset-right));
        }
        @media (max-width: 768px) {
          .admin-dashboard-header {
            flex-wrap: wrap;
            gap: 12px;
            padding: 12px 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .admin-dashboard-header > div:first-child {
            flex-direction: row;
            align-items: center;
            gap: 12px;
          }
          .admin-dashboard-header h1 {
            font-size: 20px !important;
          }
          .admin-dashboard-tabs {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding: 0 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
          }
          .admin-dashboard-tabs button {
            white-space: nowrap;
            font-size: 13px;
            padding: 10px 16px !important;
            min-height: 44px;
            flex-shrink: 0;
          }
          .admin-dashboard-tabs button span {
            display: none;
          }
          .admin-dashboard-content {
            padding: 16px !important;
            padding-left: max(16px, env(safe-area-inset-left)) !important;
            padding-right: max(16px, env(safe-area-inset-right)) !important;
          }
          .admin-stats-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-stats-grid-4 {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-cards-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-reports-grid {
            grid-template-columns: 1fr !important;
          }
          .admin-filter-grid {
            grid-template-columns: 1fr !important;
          }
          .admin-page-header {
            flex-direction: column;
            align-items: flex-start !important;
            gap: 12px;
          }
          .settings-grid {
            grid-template-columns: minmax(0, 1fr) !important;
          }
          .admin-modal-overlay {
            padding: 16px;
            align-items: flex-start;
            overflow-y: auto;
          }
          .admin-modal-box {
            max-height: calc(100vh - 32px);
            overflow-y: auto;
            width: 100%;
            margin: auto;
          }
          .admin-settings-buttons {
            flex-wrap: wrap;
          }
          .admin-settings-buttons button {
            min-width: 140px;
          }
          .admin-reports-table-wrap {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 0 -16px;
            padding: 0 16px;
          }
        }
        @media (max-width: 480px) {
          .admin-stats-grid,
          .admin-stats-grid-4,
          .admin-cards-grid {
            grid-template-columns: 1fr !important;
          }
          .admin-dashboard-tabs button {
            padding: 12px 14px !important;
          }
        }
        @media (max-width: 1024px) and (min-width: 769px) {
          .admin-stats-grid-4 {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          .admin-cards-grid {
            grid-template-columns: repeat(3, 1fr) !important;
          }
          .settings-grid {
            grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
            gap: 16px;
          }
        }
      `}),e.jsxs("div",{className:"admin-dashboard-root",style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsx(Qt,{...J}),e.jsxs("div",{className:"admin-dashboard-header",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",flex:1},children:[e.jsx(ae,{size:"small"}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b",margin:0},children:"Admin Dashboard"})]}),e.jsx(_t,{onLogout:U})]}),e.jsx("div",{className:"admin-dashboard-tabs",style:{background:"white",borderBottom:"1px solid #e2e8f0",padding:"0 24px",display:"flex",gap:"4px"},children:[{id:"dashboard",label:"Dashboard",icon:gt},{id:"staff",label:"Staff",icon:ft},{id:"windows",label:"Windows",icon:Ue},{id:"categories",label:"Categories",icon:He},{id:"reports",label:"Reports",icon:ht},{id:"settings",label:"Settings",icon:mt}].map(D=>{const q=D.icon,N=o===D.id;return e.jsxs("button",{onClick:()=>a(D.id),style:{padding:"12px 20px",border:"none",background:N?"#eff6ff":"transparent",borderBottom:N?"3px solid #2563eb":"3px solid transparent",color:N?"#2563eb":"#64748b",fontWeight:N?"600":"400",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s",borderRadius:"8px 8px 0 0"},onMouseOver:K=>{N||(K.target.style.background="#f1f5f9",K.target.style.color="#475569")},onMouseOut:K=>{N||(K.target.style.background="transparent",K.target.style.color="#64748b")},children:[e.jsx(q,{size:18}),e.jsx("span",{children:D.label})]},D.id)})}),e.jsxs("div",{className:"admin-dashboard-content",style:{maxWidth:"1400px",margin:"0 auto",padding:"24px"},children:[o==="dashboard"&&e.jsx(Kt,{stats:x}),o==="staff"&&e.jsx(Xt,{staff:h,categories:l,onRefresh:p,form:A,setForm:z,setInputDialog:X}),o==="windows"&&e.jsx(Zt,{windows:g,onRefresh:m,form:M,setForm:$}),o==="categories"&&e.jsx(en,{categories:l,onRefresh:I,categoryForm:W,setCategoryForm:P,subCategoryForm:V,setSubCategoryForm:H}),o==="reports"&&e.jsx(tn,{reports:k,filters:f,setFilters:j,staff:h,categories:l,showFilters:d,setShowFilters:C,onRefresh:B}),o==="settings"&&e.jsx(nn,{})]})]})]})}function Kt({stats:t}){const[o,a]=i.useState(new Date);if(i.useEffect(()=>{const s=setInterval(()=>{a(new Date)},1e3);return()=>clearInterval(s)},[]),!t)return e.jsx(ne,{});const n=s=>{const x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"],h=x[s.getDay()],c=w[s.getMonth()],g=s.getDate(),u=s.getFullYear();let l=s.getHours();const v=String(s.getMinutes()).padStart(2,"0"),k=String(s.getSeconds()).padStart(2,"0"),T=l>=12?"PM":"AM";return l=l%12,l=l||12,`${h}, ${c} ${g}, ${u} at ${l}:${v}:${k} ${T}`};return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:n(o)})}),e.jsxs("div",{className:"admin-stats-grid-4",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"16px"},children:[e.jsx(Z,{label:"Queue Entries Today",value:t.todayQueueEntries,icon:yt,color:"#2563eb"}),e.jsx(Z,{label:"Serving",value:t.servingCount,icon:bt,color:"#2563eb"}),e.jsx(Z,{label:"Waiting",value:t.waitingCount,icon:jt,color:"#f59e0b"}),e.jsx(Z,{label:"Served Today",value:t.todayServed,icon:De,color:"#10b981"})]}),e.jsxs("div",{className:"admin-stats-grid-4",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"24px"},children:[e.jsx(Z,{label:"Active Windows",value:t.activeWindows,icon:vt,color:"#10b981"}),e.jsx(Z,{label:"Active Staff",value:t.activeStaff,icon:wt,color:"#10b981"}),e.jsx(Z,{label:"Total Windows",value:t.totalWindows,icon:St,color:"#2563eb"}),e.jsx(Z,{label:"Total Staff",value:t.totalStaff,icon:Ct,color:"#2563eb"})]})]})}function Z({label:t,value:o,color:a="#2563eb",icon:n}){return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[n&&e.jsx(n,{size:20,color:a,style:{flexShrink:0}}),e.jsx("div",{style:{fontSize:"14px",color:"#64748b",fontWeight:"500"},children:t})]}),e.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:a,lineHeight:"1.2"},children:o||0})]})}function Xt({staff:t,categories:o,onRefresh:a,form:n,setForm:s,setInputDialog:x}){const[w,h]=i.useState(null),[c,g]=i.useState(!1),u=i.useRef(null),[l,v]=i.useState({open:!1});i.useEffect(()=>{const d=C=>{u.current&&!u.current.contains(C.target)&&g(!1)};return c&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[c]);const k=async d=>{d.preventDefault();try{await S.post("/admin/staff",n.data),s({open:!1,data:{}}),G("Staff created successfully!"),a()}catch(C){L(ie(C,"Failed to create staff"))}},T=async d=>{d.preventDefault();try{await S.put(`/admin/staff/${w.id}`,n.data),s({open:!1,data:{}}),h(null),G("Staff updated successfully!"),a()}catch(C){L(ie(C,"Failed to update staff"))}},f=async(d,C)=>{try{await S.put(`/admin/staff/${d}`,{isActive:!C}),G(`Staff ${C?"deactivated":"activated"} successfully!`),a()}catch(A){L(ie(A,"Failed to update staff"))}},j=async(d,C)=>{x({open:!0,title:"Reset Password",message:`Enter new password for ${C}:`,placeholder:"New password (min 6 characters)",type:"password",onConfirm:async A=>{var z,M;if(x({open:!1}),!!A){if(A.length<6){L("Password must be at least 6 characters");return}try{await S.post(`/admin/staff/${d}/reset-password`,{password:A}),G("Password reset successfully!")}catch($){L(((M=(z=$.response)==null?void 0:z.data)==null?void 0:M.error)||"Failed to reset password")}}},onCancel:()=>x({open:!1})})};return e.jsxs("div",{children:[e.jsx(de,{...l}),e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Staff Management"}),e.jsx(F,{onClick:()=>{s({open:!0,data:{}}),h(null)},children:"Add Staff"})]}),n.open&&fe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{s({open:!1,data:{}}),h(null)},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:w?"Edit Staff":"Create Staff"}),e.jsx("button",{onClick:()=>{s({open:!1,data:{}}),h(null)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),e.jsxs("form",{onSubmit:w?T:k,children:[e.jsx(_,{label:"Username",value:n.data.username||"",onChange:d=>s({...n,data:{...n.data,username:d.target.value}}),required:!w,disabled:!!w}),e.jsx(_,{label:"Name",value:n.data.name||"",onChange:d=>s({...n,data:{...n.data,name:d.target.value}}),required:!0}),(!w||n.data.password)&&e.jsx(_,{label:"Password",type:"password",value:n.data.password||"",onChange:d=>s({...n,data:{...n.data,password:d.target.value}}),required:!w}),e.jsxs("div",{style:{marginBottom:"16px",position:"relative"},ref:u,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#1e293b"},children:"Specializations (Categories)"}),e.jsx("div",{onClick:()=>g(!c),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:n.data.categoryIds&&n.data.categoryIds.length>0?n.data.categoryIds.map(d=>{const C=o.find(A=>A.id===d);return C?e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:A=>{A.stopPropagation(),s({...n,data:{...n.data,categoryIds:n.data.categoryIds.filter(z=>z!==d)}})},children:[C.name,e.jsx(Y,{size:12})]},d):null}):e.jsx("span",{style:{color:"#94a3b8"},children:"Select categories..."})}),c&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:o.map(d=>{var A;const C=((A=n.data.categoryIds)==null?void 0:A.includes(d.id))||!1;return e.jsxs("div",{onClick:()=>{const z=n.data.categoryIds||[];s(C?{...n,data:{...n.data,categoryIds:z.filter(M=>M!==d.id)}}:{...n,data:{...n.data,categoryIds:[...z,d.id]}})},style:{padding:"10px 12px",cursor:"pointer",background:C?"#eff6ff":"white",color:C?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:z=>{C||(z.currentTarget.style.background="#f8fafc")},onMouseOut:z=>{C||(z.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:C,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:d.name})]},d.id)})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(F,{variant:"outline",icon:Y,onClick:()=>{s({open:!1,data:{}}),h(null)},children:"Cancel"}),e.jsx(F,{type:"submit",icon:he,children:w?"Update":"Create"})]})]})]})}),document.body),e.jsx("div",{className:"admin-cards-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:t.map(d=>{const C=d.name?d.name.split(" ").map(z=>z[0]).join("").toUpperCase().slice(0,2):d.username.charAt(0).toUpperCase(),A=d.specializations?d.specializations.map(z=>z.category.name):[];return e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:d.profilePictureUrl?"transparent":"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",marginBottom:"8px",border:d.profilePictureUrl?"2px solid #e2e8f0":"none"},children:d.profilePictureUrl?e.jsx("img",{src:d.profilePictureUrl,alt:d.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"white",fontSize:"28px",fontWeight:"600"},children:C})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:d.name}),e.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:d.username})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",justifyContent:"center",marginBottom:"8px"},children:A.length>0?A.map((z,M)=>e.jsx("span",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"12px",background:"#eff6ff",color:"#2563eb",fontWeight:"500"},children:z},M)):e.jsx("span",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"12px",background:"#f1f5f9",color:"#64748b",fontWeight:"500"},children:"All categories"})}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("span",{style:{fontSize:"11px",padding:"4px 12px",borderRadius:"12px",background:d.isActive?"#ecfdf5":"#fef2f2",color:d.isActive?"#059669":"#dc2626",fontWeight:"600"},children:d.isActive?"Active":"Inactive"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"auto",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{h(d),s({open:!0,data:{username:d.username,name:d.name,categoryIds:d.specializations?d.specializations.map(z=>z.categoryId):[]}})},style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"25%"},onMouseOver:z=>{z.target.style.background="#eff6ff"},onMouseOut:z=>{z.target.style.background="transparent"},children:[e.jsx(Be,{size:14}),"Edit"]}),e.jsxs("button",{onClick:()=>j(d.id,d.name),style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"75%"},onMouseOver:z=>{z.target.style.background="#eff6ff"},onMouseOut:z=>{z.target.style.background="transparent"},children:[e.jsx(kt,{size:14}),"Reset Password"]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",width:"100%"},children:[e.jsx(F,{variant:d.isActive?"danger":"success",icon:It,onClick:()=>f(d.id,d.isActive),style:{fontSize:"12px",padding:"6px 12px",flex:1},children:d.isActive?"Deactivate":"Activate"}),e.jsx(F,{variant:"danger",icon:we,onClick:()=>{v({open:!0,title:"Remove Staff",message:`Are you sure you want to remove ${d.name||d.username}? This cannot be undone and is only allowed if the staff has no serving history.`,onConfirm:async()=>{v({open:!1});try{await S.delete(`/admin/staff/${d.id}`),G("Staff removed successfully!"),a()}catch(z){L(ie(z,"Failed to remove staff"))}},onCancel:()=>v({open:!1})})},style:{fontSize:"12px",padding:"6px 12px",flex:1},children:"Remove"})]})]})]},d.id)})})]})}function Zt({windows:t,onRefresh:o,form:a,setForm:n}){const[s,x]=i.useState(null),[w,h]=i.useState({open:!1}),c=async l=>{l.preventDefault();try{await S.post("/admin/windows",a.data),n({open:!1,data:{}}),G("Window created successfully!"),o()}catch(v){L(ie(v,"Failed to create window"))}},g=async l=>{l.preventDefault();try{await S.put(`/admin/windows/${s.id}`,a.data),n({open:!1,data:{}}),x(null),G("Window updated successfully!"),o()}catch(v){L(ie(v,"Failed to update window"))}},u=async l=>{h({open:!0,title:"Delete Window",message:"Are you sure you want to delete this window? This action cannot be undone.",onConfirm:async()=>{h({open:!1});try{await S.delete(`/admin/windows/${l}`),G("Window deleted successfully!"),o()}catch(v){L(ie(v,"Failed to delete window"))}},onCancel:()=>h({open:!1})})};return e.jsxs("div",{children:[e.jsx(de,{...w}),e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Window Management"}),e.jsx(F,{icon:Te,onClick:()=>{n({open:!0,data:{isActive:!0}}),x(null)},children:"Add Window"})]}),a.open&&fe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{n({open:!1,data:{}}),x(null)},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:s?"Edit Window":"Create Window"}),e.jsx("button",{onClick:()=>{n({open:!1,data:{}}),x(null)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),e.jsxs("form",{onSubmit:s?g:c,children:[e.jsx(_,{label:"Window Label",value:a.data.label||"",onChange:l=>n({...a,data:{...a.data,label:l.target.value}}),required:!0}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("input",{type:"checkbox",checked:a.data.isActive!==!1,onChange:l=>n({...a,data:{...a.data,isActive:l.target.checked}})}),"Active"]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(F,{variant:"outline",icon:Y,onClick:()=>{n({open:!1,data:{}}),x(null)},children:"Cancel"}),e.jsx(F,{type:"submit",icon:he,children:s?"Update":"Create"})]})]})]})}),document.body),e.jsx("div",{className:"admin-cards-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:t.map(l=>e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:e.jsx(Ue,{size:40,color:"white"})}),e.jsx("div",{style:{textAlign:"center",marginBottom:"8px"},children:e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:l.label})}),l.assignments&&l.assignments.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",justifyContent:"center",marginBottom:"8px"},children:l.assignments.map(v=>e.jsx("span",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"12px",background:"#eff6ff",color:"#2563eb",fontWeight:"500"},children:v.staff.name},v.id))}),e.jsx("div",{style:{marginBottom:"8px"},children:e.jsx("span",{style:{fontSize:"11px",padding:"4px 12px",borderRadius:"12px",background:l.isActive?"#ecfdf5":"#fef2f2",color:l.isActive?"#059669":"#dc2626",fontWeight:"600"},children:l.isActive?"Active":"Inactive"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"auto",width:"100%"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{x(l),n({open:!0,data:{label:l.label,isActive:l.isActive}})},style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"50%"},onMouseOver:v=>{v.target.style.background="#eff6ff"},onMouseOut:v=>{v.target.style.background="transparent"},children:[e.jsx(Be,{size:14}),"Edit"]}),e.jsx(F,{variant:"danger",icon:we,onClick:()=>u(l.id),style:{fontSize:"12px",padding:"6px 12px",width:"50%"},children:"Delete"})]})})]},l.id))})]})}function en({categories:t,onRefresh:o,categoryForm:a,setCategoryForm:n,subCategoryForm:s,setSubCategoryForm:x}){const[w,h]=i.useState(null),[c,g]=i.useState({open:!1}),u=async f=>{var j,d;f.preventDefault();try{await S.post("/admin/categories",a.data),n({open:!1,data:{}}),G("Category created successfully!"),o()}catch(C){L(((d=(j=C.response)==null?void 0:j.data)==null?void 0:d.error)||"Failed to create category")}},l=async f=>{var j,d;f.preventDefault();try{await S.put(`/admin/categories/${w.id}`,a.data),n({open:!1,data:{}}),h(null),G("Category updated successfully!"),o()}catch(C){L(((d=(j=C.response)==null?void 0:j.data)==null?void 0:d.error)||"Failed to update category")}},v=async f=>{g({open:!0,title:"Delete Category",message:"Are you sure you want to delete this category? All subcategories will be deleted. This action cannot be undone.",onConfirm:async()=>{var j,d;g({open:!1});try{await S.delete(`/admin/categories/${f}`),G("Category deleted successfully!"),o()}catch(C){L(((d=(j=C.response)==null?void 0:j.data)==null?void 0:d.error)||"Failed to delete category")}},onCancel:()=>g({open:!1})})},k=async f=>{var j,d;f.preventDefault();try{await S.post(`/admin/categories/${s.data.categoryId}/subcategories`,{name:s.data.name,description:s.data.description}),x({open:!1,data:{}}),G("Subcategory created successfully!"),o()}catch(C){L(((d=(j=C.response)==null?void 0:j.data)==null?void 0:d.error)||"Failed to create subcategory")}},T=async f=>{g({open:!0,title:"Delete Subcategory",message:"Are you sure you want to delete this subcategory? This action cannot be undone.",onConfirm:async()=>{var j,d;g({open:!1});try{await S.delete(`/admin/subcategories/${f}`),G("Subcategory deleted successfully!"),o()}catch(C){L(((d=(j=C.response)==null?void 0:j.data)==null?void 0:d.error)||"Failed to delete subcategory")}},onCancel:()=>g({open:!1})})};return e.jsxs("div",{children:[e.jsx(de,{...c}),e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Category Management"}),e.jsx(F,{icon:Te,onClick:()=>{n({open:!0,data:{}}),h(null)},children:"Add Category"})]}),a.open&&fe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{n({open:!1,data:{}}),h(null)},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:w?"Edit Category":"Create Category"}),e.jsx("button",{onClick:()=>{n({open:!1,data:{}}),h(null)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),e.jsxs("form",{onSubmit:w?l:u,children:[e.jsx(_,{label:"Category Name",value:a.data.name||"",onChange:f=>n({...a,data:{...a.data,name:f.target.value}}),required:!0}),e.jsx(_,{label:"Description (Optional)",value:a.data.description||"",onChange:f=>n({...a,data:{...a.data,description:f.target.value}})}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(F,{variant:"outline",icon:Y,onClick:()=>{n({open:!1,data:{}}),h(null)},children:"Cancel"}),e.jsx(F,{type:"submit",icon:he,children:w?"Update":"Create"})]})]})]})}),document.body),s.open&&fe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:()=>{x({open:!1,data:{}})},className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:"Add Subcategory"}),e.jsx("button",{onClick:()=>{x({open:!1,data:{}})},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),e.jsxs("form",{onSubmit:k,children:[e.jsx(_,{label:"Subcategory Name",value:s.data.name||"",onChange:f=>x({...s,data:{...s.data,name:f.target.value}}),required:!0}),e.jsx(_,{label:"Description (Optional)",value:s.data.description||"",onChange:f=>x({...s,data:{...s.data,description:f.target.value}})}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx(F,{variant:"outline",icon:Y,onClick:()=>{x({open:!1,data:{}})},children:"Cancel"}),e.jsx(F,{type:"submit",icon:he,children:"Create"})]})]})]})}),document.body),e.jsx("div",{className:"admin-cards-grid",style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:t.map(f=>e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:e.jsx(He,{size:40,color:"white"})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"2px"},children:f.name}),f.description&&e.jsx("div",{style:{fontSize:"12px",color:"#64748b",lineHeight:"1.4"},children:f.description})]}),f.subCategories&&f.subCategories.length>0&&e.jsx("div",{style:{marginBottom:"8px"},children:e.jsxs("span",{style:{fontSize:"11px",padding:"4px 12px",borderRadius:"12px",background:"#eff6ff",color:"#2563eb",fontWeight:"600"},children:[f.subCategories.length," Subcategor",f.subCategories.length===1?"y":"ies"]})}),f.subCategories&&f.subCategories.length>0&&e.jsx("div",{style:{width:"100%",marginBottom:"8px",maxHeight:"120px",overflowY:"auto",padding:"8px",background:"#f8fafc",borderRadius:"8px"},children:f.subCategories.map(j=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 8px",marginBottom:"4px",background:"white",borderRadius:"6px",fontSize:"12px"},children:[e.jsx("span",{style:{fontWeight:"500",color:"#1e293b"},children:j.name}),e.jsx("button",{onClick:()=>T(j.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"2px 6px",fontSize:"12px",borderRadius:"4px"},onMouseOver:d=>{d.target.style.background="#fee2e2"},onMouseOut:d=>{d.target.style.background="transparent"},children:e.jsx(we,{size:12})})]},j.id))}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"auto",width:"100%"},children:[e.jsx(F,{variant:"outline",icon:Te,onClick:()=>{x({open:!0,data:{categoryId:f.id,name:"",description:""}})},style:{fontSize:"12px",padding:"6px 12px",width:"100%"},children:"Add Subcategory"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{h(f),n({open:!0,data:{name:f.name,description:f.description||""}})},style:{fontSize:"12px",padding:"6px 12px",border:"none",background:"transparent",color:"#2563eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",fontWeight:"500",borderRadius:"6px",transition:"all 0.2s",width:"50%"},onMouseOver:j=>{j.target.style.background="#eff6ff"},onMouseOut:j=>{j.target.style.background="transparent"},children:[e.jsx(Be,{size:14}),"Edit"]}),e.jsx(F,{variant:"danger",icon:we,onClick:()=>v(f.id),style:{fontSize:"12px",padding:"6px 12px",width:"50%"},children:"Delete"})]})]})]},f.id))})]})}function tn({reports:t,filters:o,setFilters:a,staff:n,categories:s,showFilters:x,setShowFilters:w,onRefresh:h}){const[c,g]=i.useState(o),[u,l]=i.useState(!1),[v,k]=i.useState(!1),[T,f]=i.useState(!1),j=i.useRef(null),d=i.useRef(null),C=i.useRef(null);i.useEffect(()=>{x&&g(o)},[x]),i.useEffect(()=>{const r=y=>{j.current&&!j.current.contains(y.target)&&l(!1),d.current&&!d.current.contains(y.target)&&k(!1),C.current&&!C.current.contains(y.target)&&f(!1)};return(u||v||T)&&document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[u,v,T]);const A=["REGULAR","SENIOR_CITIZEN","PWD","PREGNANT"],z=Array.from({length:24},(r,y)=>y),M=()=>{const r=new Date().toISOString().split("T")[0],y={startDate:r,endDate:r,staffIds:[],categoryIds:[],clientTypes:[],startHour:"",endHour:""};a(y),g(y)},$=()=>{a(c),w(!1)},W=()=>{g(o),w(!1)},P=o.staffIds.length>0||o.categoryIds.length>0||o.clientTypes.length>0||o.startHour||o.endHour;if(!t)return e.jsx(ne,{});const V=t.byCategory?Object.entries(t.byCategory).map(([r,y])=>({name:r,value:y})):[],H=t.byClientType?Object.entries(t.byClientType).map(([r,y])=>({name:r,value:y})):[],J=t.byStaff?Object.entries(t.byStaff).map(([r,y])=>({name:r,value:y})):[],X=t.byHour?Object.entries(t.byHour).sort((r,y)=>parseInt(r[0])-parseInt(y[0])).map(([r,y])=>({hour:`${r}:00`,value:y})):[];return e.jsxs("div",{children:[e.jsxs("div",{className:"admin-page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600"},children:"Reports & Analytics"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[P&&e.jsxs("button",{onClick:M,style:{fontSize:"14px",padding:"8px 16px",border:"none",background:"transparent",boxShadow:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:"#64748b",fontWeight:"500"},onMouseOver:r=>{r.target.style.color="#1e293b"},onMouseOut:r=>{r.target.style.color="#64748b"},children:[e.jsx(Y,{size:16}),"Clear Filters"]}),e.jsxs("button",{onClick:()=>w(!0),style:{fontSize:"14px",padding:"8px 16px",border:"none",background:"transparent",boxShadow:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",color:P?"#2563eb":"#64748b",fontWeight:"500"},onMouseOver:r=>{r.target.style.color="#2563eb"},onMouseOut:r=>{r.target.style.color=P?"#2563eb":"#64748b"},children:[e.jsx(Tt,{size:16}),"Filters"]})]})]}),x&&fe.createPortal(e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:W,className:"admin-modal-overlay",children:e.jsxs("div",{className:"admin-modal-box",style:{background:"white",borderRadius:"12px",padding:"24px",maxWidth:"800px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:"Filter Reports"}),e.jsx("button",{onClick:W,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#64748b",display:"flex",alignItems:"center"},children:e.jsx(Y,{size:20})})]}),e.jsxs("div",{className:"admin-filter-grid",style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 2fr",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Start Date"}),e.jsx("input",{type:"date",value:c.startDate,onChange:r=>g({...c,startDate:r.target.value}),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"End Date"}),e.jsx("input",{type:"date",value:c.endDate,onChange:r=>g({...c,endDate:r.target.value}),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px"}})]}),e.jsxs("div",{style:{position:"relative"},ref:j,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Staff"}),e.jsx("div",{onClick:()=>l(!u),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:c.staffIds&&c.staffIds.length>0?c.staffIds.map(r=>{const y=n.find(p=>p.id===r);return y?e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:p=>{p.stopPropagation(),g({...c,staffIds:c.staffIds.filter(m=>m!==r)})},children:[y.name,e.jsx(Y,{size:12})]},r):null}):e.jsx("span",{style:{color:"#94a3b8"},children:"Select staff..."})}),u&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:n.map(r=>{var p;const y=((p=c.staffIds)==null?void 0:p.includes(r.id))||!1;return e.jsxs("div",{onClick:()=>{const m=c.staffIds||[];g(y?{...c,staffIds:m.filter(I=>I!==r.id)}:{...c,staffIds:[...m,r.id]})},style:{padding:"10px 12px",cursor:"pointer",background:y?"#eff6ff":"white",color:y?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:m=>{y||(m.currentTarget.style.background="#f8fafc")},onMouseOut:m=>{y||(m.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:y,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:r.name})]},r.id)})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{style:{position:"relative"},ref:d,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Categories"}),e.jsx("div",{onClick:()=>k(!v),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:c.categoryIds&&c.categoryIds.length>0?c.categoryIds.map(r=>{const y=s.find(p=>p.id===r);return y?e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:p=>{p.stopPropagation(),g({...c,categoryIds:c.categoryIds.filter(m=>m!==r)})},children:[y.name,e.jsx(Y,{size:12})]},r):null}):e.jsx("span",{style:{color:"#94a3b8"},children:"Select categories..."})}),v&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:s.map(r=>{var p;const y=((p=c.categoryIds)==null?void 0:p.includes(r.id))||!1;return e.jsxs("div",{onClick:()=>{const m=c.categoryIds||[];g(y?{...c,categoryIds:m.filter(I=>I!==r.id)}:{...c,categoryIds:[...m,r.id]})},style:{padding:"10px 12px",cursor:"pointer",background:y?"#eff6ff":"white",color:y?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:m=>{y||(m.currentTarget.style.background="#f8fafc")},onMouseOut:m=>{y||(m.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:y,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:r.name})]},r.id)})})]}),e.jsxs("div",{style:{position:"relative"},ref:C,children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Client Types"}),e.jsx("div",{onClick:()=>f(!T),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",backgroundColor:"white",cursor:"pointer",minHeight:"44px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"6px"},children:c.clientTypes&&c.clientTypes.length>0?c.clientTypes.map(r=>e.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",background:"#eff6ff",color:"#2563eb",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},onClick:y=>{y.stopPropagation(),g({...c,clientTypes:c.clientTypes.filter(p=>p!==r)})},children:[r.replace("_"," "),e.jsx(Y,{size:12})]},r)):e.jsx("span",{style:{color:"#94a3b8"},children:"Select client types..."})}),T&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",background:"white",border:"2px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"},children:A.map(r=>{var p;const y=((p=c.clientTypes)==null?void 0:p.includes(r))||!1;return e.jsxs("div",{onClick:()=>{const m=c.clientTypes||[];g(y?{...c,clientTypes:m.filter(I=>I!==r)}:{...c,clientTypes:[...m,r]})},style:{padding:"10px 12px",cursor:"pointer",background:y?"#eff6ff":"white",color:y?"#2563eb":"#1e293b",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid #f1f5f9"},onMouseOver:m=>{y||(m.currentTarget.style.background="#f8fafc")},onMouseOut:m=>{y||(m.currentTarget.style.background="white")},children:[e.jsx("input",{type:"checkbox",checked:y,onChange:()=>{},style:{cursor:"pointer"}}),e.jsx("span",{children:r.replace("_"," ")})]},r)})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"Start Hour (Peak Hours)"}),e.jsxs(We,{value:c.startHour,onChange:r=>g({...c,startHour:r.target.value}),children:[e.jsx("option",{value:"",children:"All Hours"}),z.map(r=>e.jsxs("option",{value:r,children:[String(r).padStart(2,"0"),":00"]},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500"},children:"End Hour (Peak Hours)"}),e.jsxs(We,{value:c.endHour,onChange:r=>g({...c,endHour:r.target.value}),children:[e.jsx("option",{value:"",children:"All Hours"}),z.map(r=>e.jsxs("option",{value:r,children:[String(r).padStart(2,"0"),":00"]},r))]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #e2e8f0"},children:[e.jsx(F,{variant:"outline",icon:Y,onClick:W,children:"Cancel"}),e.jsx(F,{variant:"primary",icon:he,onClick:$,children:"Apply Filters"})]})]})}),document.body),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsx(Z,{label:"Total Served",value:t.totalServed}),e.jsx(Z,{label:"Average Duration",value:`${Math.floor((t.averageDuration||0)/60)}m ${(t.averageDuration||0)%60}s`})]}),e.jsxs("div",{className:"admin-reports-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[V.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"By Category"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(ze,{data:V,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(je,{dataKey:"name"}),e.jsx(ve,{}),e.jsx(re,{}),e.jsx(Re,{dataKey:"value",fill:"#2563eb"})]})})]}),H.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"By Client Type"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(qe,{children:[e.jsx($e,{data:H,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:y})=>`${r}: ${(y*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:H.map((r,y)=>e.jsx(Ve,{fill:Me[y%Me.length]},`cell-${y}`))}),e.jsx(re,{})]})})]})]}),X.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:"24px"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Peak Hours"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(Bt,{data:X,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(je,{dataKey:"hour"}),e.jsx(ve,{}),e.jsx(re,{}),e.jsx(At,{type:"monotone",dataKey:"value",stroke:"#2563eb",strokeWidth:2})]})})]}),J.length>0&&e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"By Staff"}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(ze,{data:J,children:[e.jsx(be,{strokeDasharray:"3 3"}),e.jsx(je,{dataKey:"name"}),e.jsx(ve,{}),e.jsx(re,{}),e.jsx(Re,{dataKey:"value",fill:"#10b981"})]})})]})]})}function nn(){const[t,o]=i.useState(null),[a,n]=i.useState(null),[s,x]=i.useState(null),[w,h]=i.useState(!0),[c,g]=i.useState(!1),[u,l]=i.useState({open:!1}),[v,k]=i.useState(null),[T,f]=i.useState(null),[j,d]=i.useState(!1),[C,A]=i.useState({open:!1}),[z,M]=i.useState([{id:"",name:""},{id:"",name:""},{id:"",name:""}]),[$,W]=i.useState(""),[P,V]=i.useState(!1),[H,J]=i.useState(""),[X,r]=i.useState(!1),[y,p]=i.useState(""),[m,I]=i.useState(!1),[B,U]=i.useState("branding"),[D,q]=i.useState({open:!1}),[N,K]=i.useState(!1);i.useEffect(()=>{pe(),xe(),Ne(),ke(),Ke()},[]);const pe=async()=>{try{const b=await S.get("/admin/settings/logo");b.data.logoUrl&&x(b.data.logoUrl)}catch(b){console.error("Failed to load logo:",b)}finally{h(!1)}},xe=async()=>{try{const b=await S.get("/admin/settings/ding-sound");b.data.dingSoundUrl&&f(b.data.dingSoundUrl)}catch(b){console.error("Failed to load ding sound:",b)}},Ne=async()=>{var b;try{const R=await S.get("/admin/settings/tts-voices"),E=Array.isArray(R.data.voices)?R.data.voices:[],O=[...E];for(;O.length<3;)O.push({id:"",name:""});M(O.slice(0,3)),R.data.activeVoiceId?W(R.data.activeVoiceId):(b=E[0])!=null&&b.id&&W(E[0].id)}catch(R){console.error("Failed to load TTS voices:",R)}},ke=async()=>{try{const b=await S.get("/admin/settings/tts-announcement");b.data.template&&J(b.data.template)}catch(b){console.error("Failed to load TTS announcement template:",b)}},Ke=async()=>{try{const b=await S.get("/admin/settings/video-folder");b.data.videoFolderPath&&p(b.data.videoFolderPath)}catch(b){console.error("Failed to load video folder path:",b)}},Xe=b=>{const R=b.target.files[0];if(R){o(R);const E=new FileReader;E.onloadend=()=>{n(E.result)},E.readAsDataURL(R)}},Ze=async b=>{var R,E;if(b.preventDefault(),!!t){g(!0);try{const O=new FormData;O.append("logo",t);const Q=await S.post("/admin/settings/logo",O,{headers:{"Content-Type":"multipart/form-data"}});x(Q.data.logoUrl),o(null),n(null),G("Logo uploaded successfully!")}catch(O){console.error("Failed to upload logo:",O),L(((E=(R=O.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to upload logo")}finally{g(!1)}}},et=async()=>{l({open:!0,title:"Delete Logo",message:"Are you sure you want to delete the current logo?",onConfirm:async()=>{var b,R;l({open:!1});try{await S.delete("/admin/settings/logo"),x(null),o(null),n(null),G("Logo deleted successfully!")}catch(E){console.error("Failed to delete logo:",E),L(((R=(b=E.response)==null?void 0:b.data)==null?void 0:R.error)||"Failed to delete logo")}},onCancel:()=>l({open:!1})})},tt=b=>{const R=b.target.files[0];R&&k(R)},nt=async b=>{var R,E;if(b.preventDefault(),!!v){d(!0);try{const O=new FormData;O.append("sound",v);const Q=await S.post("/admin/settings/ding-sound",O,{headers:{"Content-Type":"multipart/form-data"}});f(Q.data.dingSoundUrl),k(null),G("Ding sound uploaded successfully!")}catch(O){console.error("Failed to upload ding sound:",O),L(((E=(R=O.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to upload ding sound")}finally{d(!1)}}},at=async()=>{A({open:!0,title:"Delete Ding Sound",message:"Are you sure you want to delete the current ding sound?",onConfirm:async()=>{var b,R;A({open:!1});try{await S.delete("/admin/settings/ding-sound"),f(null),k(null),G("Ding sound deleted successfully!")}catch(E){console.error("Failed to delete ding sound:",E),L(((R=(b=E.response)==null?void 0:b.data)==null?void 0:R.error)||"Failed to delete ding sound")}},onCancel:()=>A({open:!1})})},ot=async b=>{var R,E;if(b.preventDefault(),!y.trim()){L("Video folder path cannot be empty");return}I(!0);try{await S.post("/admin/settings/video-folder",{videoFolderPath:y.trim()}),G("Video folder path updated successfully!")}catch(O){console.error("Failed to save video folder path:",O),L(((E=(R=O.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to save video folder path")}finally{I(!1)}},it=async b=>{const R=typeof b=="string"?b.trim():"";if(!R){L("Please enter a voice ID first");return}const E="Window 1 will now serve number 123, or John Doe.";try{const Q=(await S.post("/tts",{text:E,voiceId:R},{responseType:"arraybuffer"})).data;if(!Q)return;const ue=new Blob([Q],{type:"audio/mpeg"}),Ie=URL.createObjectURL(ue);new Audio(Ie).play().catch(oe=>{console.error("Failed to play preview TTS audio:",oe)}).finally(()=>{URL.revokeObjectURL(Ie)})}catch(O){console.error("Failed to preview TTS voice:",O),L("Failed to preview this voice. Please check your ElevenLabs settings.")}},Ee=(b,R,E)=>{M(O=>{const Q=[...O];return Q[b]={...Q[b],[R]:E},Q})},st=async b=>{var R,E;b.preventDefault(),V(!0);try{const O=z.map(oe=>({id:(oe.id||"").trim(),name:(oe.name||"").trim()})).filter(oe=>oe.id);if(O.length===0){L("Please enter at least one ElevenLabs voice ID"),V(!1);return}const Q=$&&O.some(oe=>oe.id===$)?$:O[0].id,ue=await S.post("/admin/settings/tts-voices",{voices:O,activeVoiceId:Q}),ye=[...Array.isArray(ue.data.voices)?ue.data.voices:O];for(;ye.length<3;)ye.push({id:"",name:""});M(ye.slice(0,3)),W(ue.data.activeVoiceId||Q),G("TTS voices updated successfully!")}catch(O){console.error("Failed to save TTS voices:",O),L(((E=(R=O.response)==null?void 0:R.data)==null?void 0:E.error)||"Failed to save TTS voices")}finally{V(!1)}},rt=async b=>{var E,O;b.preventDefault();const R=(H||"").trim();if(!R){L("Announcement template cannot be empty");return}r(!0);try{await S.post("/admin/settings/tts-announcement",{template:R}),G("Announcement template updated successfully!")}catch(Q){console.error("Failed to save announcement template:",Q),L(((O=(E=Q.response)==null?void 0:E.data)==null?void 0:O.error)||"Failed to save announcement template")}finally{r(!1)}};return w?e.jsx(ne,{}):e.jsxs("div",{children:[e.jsx(de,{...u}),e.jsx(de,{...C}),e.jsx(de,{...D}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"16px"},children:"Settings"}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid #e2e8f0",paddingBottom:"4px",overflowX:"auto"},children:[{id:"branding",label:"Branding"},{id:"audio",label:"Audio & TTS"},{id:"videos",label:"Videos"},{id:"data",label:"Data"}].map(b=>{const R=B===b.id;return e.jsx("button",{type:"button",onClick:()=>U(b.id),style:{padding:"8px 16px",borderRadius:"9999px",border:"none",backgroundColor:R?"#1d4ed8":"transparent",color:R?"#ffffff":"#475569",fontSize:"14px",fontWeight:R?600:500,cursor:"pointer",boxShadow:R?"0 1px 3px rgba(15, 23, 42, 0.25)":"none",whiteSpace:"nowrap"},children:b.label},b.id)})}),B==="branding"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #2563eb"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Logo"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Upload a logo to display across all pages. Supported formats: JPG, PNG, GIF, SVG, WebP (max 5MB)"}),s&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Current Logo:"}),e.jsx("img",{src:s,alt:"Current logo",style:{maxWidth:"200px",maxHeight:"100px",objectFit:"contain",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"}})]}),e.jsxs("form",{onSubmit:Ze,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Upload New Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Xe,style:{width:"100%",padding:"8px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),a&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Preview:"}),e.jsx("img",{src:a,alt:"Preview",style:{maxWidth:"200px",maxHeight:"100px",objectFit:"contain",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"8px"}})]}),e.jsxs("div",{className:"admin-settings-buttons",style:{display:"flex",gap:"8px"},children:[e.jsx(F,{type:"submit",disabled:!t||c,children:c?"Uploading...":"Upload Logo"}),s&&e.jsx(F,{variant:"danger",onClick:et,children:"Delete Logo"})]})]})]})}),B==="audio"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #f97316"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Ding Sound (Announcement Chime)"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Upload a short audio file to play before each queue announcement on the public monitoring page. Supported formats: MP3, WAV, OGG, M4A, AAC (max 2MB). Keep it brief (under 2 seconds) for best results."}),T&&e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Current Ding Sound:"}),e.jsx("audio",{controls:!0,src:T,style:{width:"100%",maxWidth:"400px"},children:"Your browser does not support the audio element."})]}),e.jsxs("form",{onSubmit:nt,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Upload New Ding Sound"}),e.jsx("input",{type:"file",accept:"audio/*",onChange:tt,style:{width:"100%",padding:"8px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"}})]}),e.jsxs("div",{className:"admin-settings-buttons",style:{display:"flex",gap:"8px"},children:[e.jsx(F,{type:"submit",disabled:!v||j,children:j?"Uploading...":"Upload Ding Sound"}),T&&e.jsx(F,{variant:"danger",onClick:at,children:"Delete Ding Sound"})]})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #0ea5e9"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Announcement Message Template"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"12px"},children:"Control what the voice will say when announcing a new client. You can use the following placeholders, which will be replaced automatically:"}),e.jsxs("ul",{style:{fontSize:"13px",color:"#64748b",marginBottom:"16px",paddingLeft:"20px"},children:[e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{window}}"})," â€” window label (e.g. Window 1)"]}),e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{queueNumber}}"})," â€” queue number counter (e.g. 6)"]}),e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{clientName}}"})," â€” client name (may be empty)"]}),e.jsxs("li",{children:[e.jsx("code",{style:{fontFamily:"monospace"},children:"{{clientNamePart}}"})," â€” expands to ",e.jsx("code",{children:", or client name John Doe"})," when a name exists, or nothing otherwise"]})]}),e.jsxs("form",{onSubmit:rt,children:[e.jsx("textarea",{value:H,onChange:b=>J(b.target.value),rows:3,style:{width:"100%",padding:"12px 14px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box"},placeholder:"Window {{window}} will now serve queue number {{queueNumber}}{{clientNamePart}}."}),e.jsx("div",{style:{marginTop:"12px",display:"flex",gap:"8px"},children:e.jsx(F,{type:"submit",disabled:X,children:X?"Saving Template...":"Save Template"})})]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #10b981"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Text-to-Speech Voices (ElevenLabs)"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px"},children:"Configure up to three ElevenLabs voice IDs and choose which one is active for queue announcements. Voice IDs can be copied from your ElevenLabs dashboard."}),e.jsxs("form",{onSubmit:st,children:[z.map((b,R)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.2fr) minmax(0, 1.4fr) auto",gap:"12px",marginBottom:"12px",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",fontWeight:"500"},children:["Voice ",R+1," Name (optional)"]}),e.jsx("input",{type:"text",value:b.name||"",onChange:E=>Ee(R,"name",E.target.value),placeholder:"e.g. Front Desk Female",style:{width:"100%",padding:"8px 10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",fontWeight:"500"},children:["Voice ",R+1," ID"]}),e.jsx("input",{type:"text",value:b.id||"",onChange:E=>Ee(R,"id",E.target.value),placeholder:"ElevenLabs voice ID",style:{width:"100%",padding:"8px 10px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"6px"},children:[e.jsx("button",{type:"button",onClick:()=>it(b.id),disabled:!b.id,style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:b.id?"#eff6ff":"#f8fafc",color:b.id?"#2563eb":"#94a3b8",fontSize:"12px",fontWeight:500,cursor:b.id?"pointer":"not-allowed"},children:"Preview Voice"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px"},children:[e.jsx("input",{type:"radio",name:"activeVoice",checked:!!b.id&&$===b.id,disabled:!b.id,onChange:()=>{b.id&&W(b.id)}}),"Active"]})]})]},R)),e.jsx("div",{style:{marginTop:"16px",display:"flex",gap:"8px"},children:e.jsx(F,{type:"submit",disabled:P,children:P?"Saving Voices...":"Save Voices"})})]})]})]}),B==="videos"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #6366f1"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Video Folder Path"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Configure the local folder path where video files are stored. The system will scan this folder for video files (mp4, webm, ogg, mov, avi) to play on the public monitoring page."}),e.jsxs("form",{onSubmit:ot,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Video Folder Path"}),e.jsx("input",{type:"text",value:y,onChange:b=>p(b.target.value),placeholder:"C:\\\\Users\\\\username\\\\videos or /Users/username/videos or videos",style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"2px solid #e2e8f0",fontSize:"14px",fontFamily:"monospace",backgroundColor:"#f8fafc",color:"#1e293b",transition:"all 0.2s",boxSizing:"border-box"},onFocus:b=>{b.target.style.borderColor="#2563eb",b.target.style.backgroundColor="#ffffff",b.target.style.boxShadow="0 0 0 3px rgba(37, 99, 235, 0.1)"},onBlur:b=>{b.target.style.borderColor="#e2e8f0",b.target.style.backgroundColor="#f8fafc",b.target.style.boxShadow="none"}}),e.jsxs("p",{style:{fontSize:"12px",color:"#64748b",marginTop:"8px",marginBottom:0},children:["Enter an absolute path (Windows: ",e.jsx("code",{style:{fontFamily:"monospace",fontSize:"11px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px"},children:"C:\\Users\\username\\videos"})," or Mac/Linux: ",e.jsx("code",{style:{fontFamily:"monospace",fontSize:"11px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px"},children:"/Users/username/videos"}),") or a relative path from the backend directory (e.g., ",e.jsx("code",{style:{fontFamily:"monospace",fontSize:"11px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px"},children:"videos"}),")"]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx(F,{type:"submit",disabled:m||!y.trim(),children:m?"Saving...":"Save Video Folder Path"})})]})]})}),B==="data"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",borderTop:"3px solid #dc2626"},children:[e.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px"},children:"Reset queue stats"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"24px"},children:"Permanently delete all queue entries, serving logs, and daily queue counters. Staff, windows, and categories are not affected. This cannot be undone."}),e.jsx(F,{variant:"danger",disabled:N,onClick:()=>{q({open:!0,title:"Reset all queue stats?",message:"This will delete all queue entries, serving logs, and daily counters. Staff, windows, and categories will be kept. This action cannot be undone.",onConfirm:async()=>{var b,R;q({open:!1}),K(!0);try{await S.post("/admin/reset-queue-stats"),G("Queue stats reset successfully.")}catch(E){L(((R=(b=E.response)==null?void 0:b.data)==null?void 0:R.error)||"Failed to reset queue stats")}finally{K(!1)}},onCancel:()=>q({open:!1})})},children:N?"Resetting...":"Reset queue stats"})]})})]})}function an(){return e.jsxs(e.Fragment,{children:[e.jsx($t,{}),e.jsxs(zt,{children:[e.jsx(ee,{path:"/",element:e.jsx(Et,{})}),e.jsx(ee,{path:"/success",element:e.jsx(Ot,{})}),e.jsx(ee,{path:"/thank-you",element:e.jsx(Lt,{})}),e.jsx(ee,{path:"/monitor",element:e.jsx(Mt,{})}),e.jsx(ee,{path:"/staff/login",element:e.jsx(Ut,{})}),e.jsx(ee,{path:"/staff/dashboard",element:e.jsx(Vt,{})}),e.jsx(ee,{path:"/staff/profile",element:e.jsx(Gt,{})}),e.jsx(ee,{path:"/admin/login",element:e.jsx(Yt,{})}),e.jsx(ee,{path:"/admin/dashboard",element:e.jsx(Jt,{})})]})]})}Rt.createRoot(document.getElementById("root")).render(e.jsx(Wt.StrictMode,{children:e.jsx(Dt,{children:e.jsx(an,{})})}));
